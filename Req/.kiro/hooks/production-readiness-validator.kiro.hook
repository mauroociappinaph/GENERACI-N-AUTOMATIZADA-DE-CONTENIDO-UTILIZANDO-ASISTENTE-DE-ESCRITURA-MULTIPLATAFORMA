{
  "enabled": true,
  "name": "Production Readiness Validator",
  "description": "Valida que TODO estÃ© funcionando antes de permitir PR a main (producciÃ³n)",
  "version": "1.0",
  "when": {
    "type": "manual",
    "buttonText": "ğŸ”’ Validate for Production"
  },
  "then": {
    "type": "askAgent",
    "prompt": "ğŸ”’ **VALIDACIÃ“N CRÃTICA PARA PRODUCCIÃ“N**\n\nAntes de crear PR a main, debo verificar que TODO estÃ© funcionando correctamente.\n\n## âš ï¸ **VALIDACIONES OBLIGATORIAS:**\n\n### 1. **Tests Completos**\n```bash\necho \"ğŸ§ª Ejecutando tests completos...\"\n\n# Backend Tests\ncd Req/backend\nnpm run test -- --coverage --verbose\nif [ $? -ne 0 ]; then\n    echo \"âŒ FALLO: Tests de backend fallando\"\n    exit 1\nfi\n\n# Frontend Tests\ncd ../frontend\nnpm run test -- --watchAll=false\nif [ $? -ne 0 ]; then\n    echo \"âŒ FALLO: Tests de frontend fallando\"\n    exit 1\nfi\n\necho \"âœ… Todos los tests pasan\"\n```\n\n### 2. **Build Completo**\n```bash\necho \"ğŸ—ï¸ Verificando builds...\"\n\n# Backend Build\ncd Req/backend\nnpm run build\nif [ $? -ne 0 ]; then\n    echo \"âŒ FALLO: Build de backend falla\"\n    exit 1\nfi\n\n# Frontend Build\ncd ../frontend\nnpm run build\nif [ $? -ne 0 ]; then\n    echo \"âŒ FALLO: Build de frontend falla\"\n    exit 1\nfi\n\necho \"âœ… Builds exitosos\"\n```\n\n### 3. **Calidad de CÃ³digo**\n```bash\necho \"ğŸ” Verificando calidad de cÃ³digo...\"\n\n# Backend Lint\ncd Req/backend\nnpm run lint\nif [ $? -ne 0 ]; then\n    echo \"âŒ FALLO: Lint de backend falla\"\n    exit 1\nfi\n\n# Frontend Lint\ncd ../frontend\nnpm run lint\nif [ $? -ne 0 ]; then\n    echo \"âŒ FALLO: Lint de frontend falla\"\n    exit 1\nfi\n\necho \"âœ… Calidad de cÃ³digo OK\"\n```\n\n### 4. **Seguridad**\n```bash\necho \"ğŸ”’ Verificando seguridad...\"\n\n# Audit de dependencias\ncd Req/backend\nnpm audit --audit-level=high\nif [ $? -ne 0 ]; then\n    echo \"âš ï¸ ADVERTENCIA: Vulnerabilidades encontradas en backend\"\nfi\n\ncd ../frontend\nnpm audit --audit-level=high\nif [ $? -ne 0 ]; then\n    echo \"âš ï¸ ADVERTENCIA: Vulnerabilidades encontradas en frontend\"\nfi\n\necho \"âœ… Audit de seguridad completado\"\n```\n\n### 5. **Base de Datos**\n```bash\necho \"ğŸ—„ï¸ Verificando base de datos...\"\n\ncd Req/backend\n# Verificar que Prisma estÃ¡ actualizado\nnpm run db:generate\nif [ $? -ne 0 ]; then\n    echo \"âŒ FALLO: Error generando cliente Prisma\"\n    exit 1\nfi\n\n# Test de conexiÃ³n\nnpm run db:test\nif [ $? -ne 0 ]; then\n    echo \"âŒ FALLO: No se puede conectar a la base de datos\"\n    exit 1\nfi\n\necho \"âœ… Base de datos OK\"\n```\n\n### 6. **Variables de Entorno**\n```bash\necho \"âš™ï¸ Verificando configuraciÃ³n...\"\n\n# Verificar archivos .env\nif [ ! -f \"Req/backend/.env\" ]; then\n    echo \"âŒ FALLO: Falta archivo .env en backend\"\n    exit 1\nfi\n\nif [ ! -f \"Req/frontend/.env.local\" ]; then\n    echo \"âš ï¸ ADVERTENCIA: Falta archivo .env.local en frontend\"\nfi\n\necho \"âœ… ConfiguraciÃ³n verificada\"\n```\n\n## ğŸ“‹ **CHECKLIST DE PRODUCCIÃ“N:**\n\n### **Funcionalidad:**\n- [ ] âœ… Todos los tests unitarios pasan\n- [ ] âœ… Tests de integraciÃ³n pasan\n- [ ] âœ… Build de backend exitoso\n- [ ] âœ… Build de frontend exitoso\n- [ ] âœ… No hay errores de lint\n- [ ] âœ… No hay errores de TypeScript\n\n### **Seguridad:**\n- [ ] âœ… No hay vulnerabilidades crÃ­ticas\n- [ ] âœ… No hay secrets hardcodeados\n- [ ] âœ… Variables de entorno configuradas\n- [ ] âœ… Headers de seguridad implementados\n\n### **Base de Datos:**\n- [ ] âœ… ConexiÃ³n a BD funciona\n- [ ] âœ… Migraciones aplicadas\n- [ ] âœ… Cliente Prisma generado\n- [ ] âœ… Backup plan preparado\n\n### **Infraestructura:**\n- [ ] âœ… ConfiguraciÃ³n de producciÃ³n lista\n- [ ] âœ… Monitoring configurado\n- [ ] âœ… Logs configurados\n- [ ] âœ… Plan de rollback preparado\n\n## ğŸš¨ **CRITERIOS DE APROBACIÃ“N:**\n\n### **DEBE PASAR (Obligatorio):**\n- âœ… **Todos los tests pasan**\n- âœ… **Build exitoso sin errores**\n- âœ… **No hay errores de lint**\n- âœ… **Base de datos funciona**\n\n### **DEBE REVISAR (CrÃ­tico):**\n- âš ï¸ **Vulnerabilidades de seguridad**\n- âš ï¸ **Performance issues**\n- âš ï¸ **Breaking changes**\n\n## ğŸ¯ **RESULTADO:**\n\nDespuÃ©s de ejecutar todas las validaciones, te darÃ© uno de estos resultados:\n\n### âœ… **APROBADO PARA PRODUCCIÃ“N**\n```\nğŸ‰ Â¡Listo para producciÃ³n!\n- Todos los tests pasan\n- Build exitoso\n- Calidad de cÃ³digo OK\n- Seguridad validada\n- Base de datos OK\n\nâœ… PUEDES CREAR PR A MAIN\n```\n\n### âŒ **NO APROBADO - REQUIERE CORRECCIONES**\n```\nğŸš¨ NO listo para producciÃ³n\n- [Lista de issues encontrados]\n- [Acciones requeridas]\n\nâŒ NO CREAR PR A MAIN HASTA CORREGIR\n```\n\n### âš ï¸ **APROBADO CON ADVERTENCIAS**\n```\nâš ï¸ Listo con precauciones\n- [Lista de advertencias]\n- [Recomendaciones]\n\nâš ï¸ PUEDES CREAR PR PERO MONITOREA ACTIVAMENTE\n```\n\n## ğŸš€ **Â¿Ejecutar validaciÃ³n completa?**\n\nEsto tomarÃ¡ unos minutos pero es CRÃTICO para asegurar que producciÃ³n no se rompa.\n\n**Â¿Proceder con la validaciÃ³n completa para producciÃ³n?**"
  }
}
