{
  "enabled": true,
  "name": "Branch Management Helper",
  "description": "Automatiza la gestiÃ³n de branches segÃºn nuestra estrategia de desarrollo",
  "version": "1.0",
  "when": {
    "type": "branchChanged"
  },
  "then": {
    "type": "askAgent",
    "prompt": "AyÃºdame con la gestiÃ³n de branches segÃºn nuestra estrategia de desarrollo.\n\n## ğŸ“‹ Estrategia de Branching:\n\n- **main**: CÃ³digo de producciÃ³n (siempre estable y deployable)\n- **dev**: Rama de integraciÃ³n para desarrollo (staging environment)\n- **feature/**: Features individuales (creadas desde dev, mergeadas a dev)\n- **hotfix/**: Fixes urgentes (creadas desde main, mergeadas a main y dev)\n\n## ğŸ”§ Operaciones disponibles:\n\n### 1. **Crear Feature Branch**\n```bash\n# Crear nueva feature branch desde dev\ngit checkout dev\ngit pull origin dev\ngit checkout -b feature/[NOMBRE-FUNCIONALIDAD]\necho \"âœ… Feature branch creada desde dev\"\n```\n\n### 2. **Finalizar Feature**\n```bash\n# Merge feature a dev (con squash para historial limpio)\ngit checkout dev\ngit pull origin dev\ngit merge --squash feature/[NOMBRE-FUNCIONALIDAD]\ngit commit -m \"feat: descripciÃ³n de la funcionalidad\"\ngit push origin dev\ngit branch -d feature/[NOMBRE-FUNCIONALIDAD]\necho \"âœ… Feature mergeada a dev y branch limpiada\"\n```\n\n### 3. **Preparar Release (Dev â†’ Main)**\n```bash\n# SOLO despuÃ©s de validaciones completas\ngit checkout main\ngit pull origin main\ngit merge dev\ngit push origin main\necho \"âœ… Release deployado a producciÃ³n\"\n```\n\n### 4. **Crear Hotfix**\n```bash\n# Para fixes urgentes en producciÃ³n\ngit checkout main\ngit pull origin main\ngit checkout -b hotfix/[DESCRIPCION-FIX]\n# ... hacer cambios ...\ngit commit -m \"hotfix: descripciÃ³n del fix\"\ngit push origin hotfix/[DESCRIPCION-FIX]\n# Crear PR a main Y dev\n```\n\n### 5. **Cleanup Branches**\n```bash\n# Limpiar branches obsoletas (CUIDADO)\ngit branch --merged dev | grep -v \"main\\|dev\" | xargs -n 1 git branch -d\ngit remote prune origin\necho \"âœ… Branches obsoletas limpiadas\"\n```\n\n### 6. **Status Check**\n```bash\n# Verificar estado actual\necho \"ğŸ“ Rama actual: $(git branch --show-current)\"\necho \"ğŸ“Š Branches locales:\"\ngit branch\necho \"ğŸŒ Branches remotas:\"\ngit branch -r\necho \"ğŸ“ Status:\"\ngit status --short\n```\n\n## âš ï¸ **Reglas Importantes:**\n\n1. **NUNCA hacer push directo a main**\n2. **SIEMPRE crear PRs para merge a main**\n3. **VALIDAR completamente antes de merge a main**\n4. **Usar nombres descriptivos para branches**\n5. **Limpiar branches despuÃ©s de merge**\n\n## ğŸ¯ **Â¿QuÃ© operaciÃ³n necesitas realizar?**\n\n1. **Crear feature branch** para nueva funcionalidad\n2. **Finalizar feature** y merge a dev\n3. **Preparar release** (dev â†’ main) - âš ï¸ REQUIERE VALIDACIONES\n4. **Crear hotfix** para fix urgente\n5. **Cleanup branches** obsoletas\n6. **Ver status** de branches\n\n## ğŸ“‹ **InformaciÃ³n actual:**\n- Rama actual: `$(git branch --show-current)`\n- Ãšltimo commit: `$(git log -1 --oneline)`\n- Status: `$(git status --porcelain | wc -l) archivos modificados`\n\nPor favor indica quÃ© operaciÃ³n quieres realizar y te guÃ­o paso a paso."
  }
}
