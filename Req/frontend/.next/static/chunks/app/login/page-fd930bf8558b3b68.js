(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{37963:function(e,r,t){Promise.resolve().then(t.bind(t,67392))},32921:function(e,r,t){"use strict";var n=t(26168);t.o(n,"useParams")&&t.d(r,{useParams:function(){return n.useParams}}),t.o(n,"usePathname")&&t.d(r,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}})},58352:function(e,r,t){"use strict";var n=t(2265),s="function"==typeof Object.is?Object.is:function(e,r){return e===r&&(0!==e||1/e==1/r)||e!=e&&r!=r},a=n.useState,o=n.useEffect,i=n.useLayoutEffect,c=n.useDebugValue;function u(e){var r=e.getSnapshot;e=e.value;try{var t=r();return!s(e,t)}catch(e){return!0}}var l=void 0===window.document||void 0===window.document.createElement?function(e,r){return r()}:function(e,r){var t=r(),n=a({inst:{value:t,getSnapshot:r}}),s=n[0].inst,l=n[1];return i(function(){s.value=t,s.getSnapshot=r,u(s)&&l({inst:s})},[e,t,r]),o(function(){return u(s)&&l({inst:s}),e(function(){u(s)&&l({inst:s})})},[e]),c(t),t};r.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:l},14351:function(e,r,t){"use strict";var n=t(2265),s=t(48797),a="function"==typeof Object.is?Object.is:function(e,r){return e===r&&(0!==e||1/e==1/r)||e!=e&&r!=r},o=s.useSyncExternalStore,i=n.useRef,c=n.useEffect,u=n.useMemo,l=n.useDebugValue;r.useSyncExternalStoreWithSelector=function(e,r,t,n,s){var f=i(null);if(null===f.current){var d={hasValue:!1,value:null};f.current=d}else d=f.current;var p=o(e,(f=u(function(){function e(e){if(!c){if(c=!0,o=e,e=n(e),void 0!==s&&d.hasValue){var r=d.value;if(s(r,e))return i=r}return i=e}if(r=i,a(o,e))return r;var t=n(e);return void 0!==s&&s(r,t)?(o=e,r):(o=e,i=t)}var o,i,c=!1,u=void 0===t?null:t;return[function(){return e(r())},null===u?void 0:function(){return e(u())}]},[r,t,n,s]))[0],f[1]);return c(function(){d.hasValue=!0,d.value=p},[p]),l(p),p}},48797:function(e,r,t){"use strict";e.exports=t(58352)},3029:function(e,r,t){"use strict";e.exports=t(14351)},67392:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return m}});var n=t(50090),s=t(30837),a=t.n(s),o=t(19245),i=t(55010),c=t(36118),u=t(52133),l=t(35685),f=t(10026),d=function(){var e,r,t,s,o;function i(){(0,l.Z)(this,i)}return(0,f.Z)(i,null,[{key:"getBackendUrl",value:function(){return"http://localhost:3001"}},{key:"login",value:(e=(0,n.Z)(a().mark(function e(r){var t,n,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(this.getBackendUrl(),"/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 3:if((t=e.sent).ok){e.next=9;break}return e.next=7,t.json();case 7:throw Error((null===(n=e.sent.error)||void 0===n?void 0:n.message)||"Error al iniciar sesi\xf3n");case 9:return e.next=11,t.json();case 11:if((s=e.sent).data){e.next=14;break}throw Error("Respuesta inv\xe1lida del servidor");case 14:return e.abrupt("return",s.data);case 17:throw e.prev=17,e.t0=e.catch(0),console.error("Login error:",e.t0),e.t0 instanceof Error?e.t0:Error("Error al iniciar sesi\xf3n");case 21:case"end":return e.stop()}},e,this,[[0,17]])})),function(r){return e.apply(this,arguments)})},{key:"refreshToken",value:(r=(0,n.Z)(a().mark(function e(r){var t,n,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(this.getBackendUrl(),"/api/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:r})});case 3:if((t=e.sent).ok){e.next=9;break}return e.next=7,t.json();case 7:throw Error((null===(n=e.sent.error)||void 0===n?void 0:n.message)||"Error al refrescar token");case 9:return e.next=11,t.json();case 11:if((s=e.sent).data){e.next=14;break}throw Error("Respuesta inv\xe1lida del servidor");case 14:return e.abrupt("return",s.data);case 17:throw e.prev=17,e.t0=e.catch(0),console.error("Refresh token error:",e.t0),e.t0 instanceof Error?e.t0:Error("Error al refrescar token");case 21:case"end":return e.stop()}},e,this,[[0,17]])})),function(e){return r.apply(this,arguments)})},{key:"logout",value:(t=(0,n.Z)(a().mark(function e(r){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(this.getBackendUrl(),"/api/auth/logout"),{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"}});case 3:e.sent.ok||console.warn("Logout request failed, but continuing with client-side logout"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn("Logout error:",e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])})),function(e){return t.apply(this,arguments)})},{key:"getCurrentUser",value:(s=(0,n.Z)(a().mark(function e(r){var t,n,s,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(this.getBackendUrl(),"/api/auth/me"),{method:"GET",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"}});case 3:if((n=e.sent).ok){e.next=9;break}return e.next=7,n.json();case 7:throw Error((null===(s=e.sent.error)||void 0===s?void 0:s.message)||"Error al obtener informaci\xf3n del usuario");case 9:return e.next=11,n.json();case 11:if(null!==(t=(o=e.sent).data)&&void 0!==t&&t.user){e.next=14;break}throw Error("Respuesta inv\xe1lida del servidor");case 14:return e.abrupt("return",o.data.user);case 17:throw e.prev=17,e.t0=e.catch(0),console.error("Get current user error:",e.t0),e.t0 instanceof Error?e.t0:Error("Error al obtener informaci\xf3n del usuario");case 21:case"end":return e.stop()}},e,this,[[0,17]])})),function(e){return s.apply(this,arguments)})},{key:"verifyToken",value:(o=(0,n.Z)(a().mark(function e(r){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getCurrentUser(r);case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}},e,this,[[0,6]])})),function(e){return o.apply(this,arguments)})}]),i}(),p=t(2265),b=t(32921),h=t(73880),v=t(57437);function m(){var e,r=(0,p.useState)(""),t=r[0],s=r[1],l=(0,p.useState)(""),f=l[0],m=l[1],y=(0,p.useState)(null),g=y[0],x=y[1],j=(0,p.useState)(!1),w=j[0],O=j[1],N=(0,u.t)().login,E=(0,b.useRouter)(),k=(e=(0,n.Z)(a().mark(function e(r){var n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),x(null),O(!0),e.prev=3,!(!t||!f)){e.next=6;break}throw Error("Por favor, complete todos los campos");case 6:return e.next=8,d.login({email:t,password:f});case 8:N((n=e.sent).accessToken,n.user),E.push("/"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),x(e.t0 instanceof Error?e.t0.message:"Error al iniciar sesi\xf3n");case 16:return e.prev=16,O(!1),e.finish(16);case 19:case"end":return e.stop()}},e,null,[[3,13,16,19]])})),function(r){return e.apply(this,arguments)});return(0,v.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,v.jsxs)(c.Zb,{className:"w-full max-w-md",children:[(0,v.jsxs)(c.Ol,{className:"space-y-1",children:[(0,v.jsx)(c.ll,{className:"text-2xl font-bold text-center",children:"Sistema de Gesti\xf3n #040"}),(0,v.jsx)(c.SZ,{className:"text-center",children:"Ingrese sus credenciales para acceder al sistema"})]}),(0,v.jsxs)("form",{onSubmit:k,children:[(0,v.jsxs)(c.aY,{className:"space-y-4",children:[g&&(0,v.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md text-sm",children:g}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)("label",{htmlFor:"email",className:"text-sm font-medium",children:"Correo electr\xf3nico"}),(0,v.jsx)(i.I,{id:"email",type:"email",placeholder:"correo@ejemplo.com",value:t,onChange:function(e){return s(e.target.value)},required:!0})]}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsx)("label",{htmlFor:"password",className:"text-sm font-medium",children:"Contrase\xf1a"}),(0,v.jsx)(h.default,{href:"/recuperar-password",className:"text-sm text-blue-600 hover:text-blue-500",children:"\xbfOlvid\xf3 su contrase\xf1a?"})]}),(0,v.jsx)(i.I,{id:"password",type:"password",placeholder:"••••••••",value:f,onChange:function(e){return m(e.target.value)},required:!0})]})]}),(0,v.jsxs)(c.eW,{className:"flex flex-col space-y-4",children:[(0,v.jsx)(o.z,{type:"submit",className:"w-full",isLoading:w,children:"Iniciar sesi\xf3n"}),(0,v.jsxs)("p",{className:"text-center text-sm text-gray-600",children:["\xbfProblemas para acceder?"," ",(0,v.jsx)(h.default,{href:"/contacto",className:"text-blue-600 hover:text-blue-500",children:"Contacte a soporte"})]})]})]})]})})}},19245:function(e,r,t){"use strict";t.d(r,{z:function(){return f}});var n=t(84513),s=t(83366),a=t(39436),o=t(2265),i=t(57437),c=["className","children","variant","size","isLoading","disabled"];function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?u(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var f=(0,o.forwardRef)(function(e,r){var t=e.className,n=e.children,o=e.variant,u=e.size,f=e.isLoading,d=void 0!==f&&f,p=e.disabled,b=(0,s.Z)(e,c);return(0,i.jsxs)("button",l(l({className:(0,a.cn)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",{default:"bg-blue-600 text-white hover:bg-blue-700 focus-visible:ring-blue-500",primary:"bg-blue-600 text-white hover:bg-blue-700 focus-visible:ring-blue-500",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 focus-visible:ring-gray-500",outline:"border border-gray-300 bg-transparent hover:bg-gray-100 focus-visible:ring-gray-500",ghost:"bg-transparent hover:bg-gray-100 focus-visible:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus-visible:ring-red-500"}[void 0===o?"primary":o],{sm:"h-8 px-3 text-xs",md:"h-10 px-4 py-2",lg:"h-12 px-6 py-3 text-lg"}[void 0===u?"md":u],d&&"opacity-70 cursor-not-allowed",t),disabled:p||d,ref:r},b),{},{children:[d&&(0,i.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n]}))});f.displayName="Button"},36118:function(e,r,t){"use strict";t.d(r,{Ol:function(){return m},SZ:function(){return g},Zb:function(){return v},aY:function(){return x},eW:function(){return j},ll:function(){return y}});var n=t(84513),s=t(83366),a=t(39436),o=t(2265),i=t(57437),c=["className"],u=["className"],l=["className"],f=["className"],d=["className"],p=["className"];function b(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function h(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?b(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var v=(0,o.forwardRef)(function(e,r){var t=e.className,n=(0,s.Z)(e,c);return(0,i.jsx)("div",h({ref:r,className:(0,a.cn)("rounded-lg border border-gray-200 bg-white shadow-sm",t)},n))});v.displayName="Card";var m=(0,o.forwardRef)(function(e,r){var t=e.className,n=(0,s.Z)(e,u);return(0,i.jsx)("div",h({ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t)},n))});m.displayName="CardHeader";var y=(0,o.forwardRef)(function(e,r){var t=e.className,n=(0,s.Z)(e,l);return(0,i.jsx)("h3",h({ref:r,className:(0,a.cn)("text-lg font-semibold leading-none tracking-tight",t)},n))});y.displayName="CardTitle";var g=(0,o.forwardRef)(function(e,r){var t=e.className,n=(0,s.Z)(e,f);return(0,i.jsx)("p",h({ref:r,className:(0,a.cn)("text-sm text-gray-500",t)},n))});g.displayName="CardDescription";var x=(0,o.forwardRef)(function(e,r){var t=e.className,n=(0,s.Z)(e,d);return(0,i.jsx)("div",h({ref:r,className:(0,a.cn)("p-6 pt-0",t)},n))});x.displayName="CardContent";var j=(0,o.forwardRef)(function(e,r){var t=e.className,n=(0,s.Z)(e,p);return(0,i.jsx)("div",h({ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",t)},n))});j.displayName="CardFooter"},55010:function(e,r,t){"use strict";t.d(r,{I:function(){return l}});var n=t(84513),s=t(83366),a=t(39436),o=t(2265),i=t(57437),c=["className","error"];function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}var l=(0,o.forwardRef)(function(e,r){var t=e.className,o=e.error,l=(0,s.Z)(e,c);return(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)("input",function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?u(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({className:(0,a.cn)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50",o&&"border-red-500 focus:ring-red-500",t),ref:r},l)),o&&(0,i.jsx)("p",{className:"mt-1 text-sm text-red-600",children:o})]})});l.displayName="Input"},39436:function(e,r,t){"use strict";t.d(r,{cn:function(){return a}});var n=t(20487),s=t(63932);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.m6)((0,n.W)(r))}},52133:function(e,r,t){"use strict";t.d(r,{t:function(){return o}});var n=t(84513);function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function a(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var o=(0,t(71703).Ue)()(function(e){return{user:null,token:null,isAuthenticated:!1,isLoading:!1,isInitialized:!1,login:function(r,t){return e({token:r,user:t,isAuthenticated:!0,isLoading:!1,isInitialized:!0})},logout:function(){return e({token:null,user:null,isAuthenticated:!1,isInitialized:!0})},setLoading:function(r){return e({isLoading:r})},updateUser:function(r){return e(function(e){return{user:e.user?a(a({},e.user),r):null}})},initialize:function(r,t,n){return e({user:r,token:t,isAuthenticated:n,isInitialized:!0})}}})},50090:function(e,r,t){"use strict";function n(e,r,t,n,s,a,o){try{var i=e[a](o),c=i.value}catch(e){t(e);return}i.done?r(c):Promise.resolve(c).then(n,s)}function s(e){return function(){var r=this,t=arguments;return new Promise(function(s,a){var o=e.apply(r,t);function i(e){n(o,s,a,i,c,"next",e)}function c(e){n(o,s,a,i,c,"throw",e)}i(void 0)})}}t.d(r,{Z:function(){return s}})},35685:function(e,r,t){"use strict";function n(e,r){if(!(e instanceof r))throw TypeError("Cannot call a class as a function")}t.d(r,{Z:function(){return n}})},10026:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});var n=t(12884);function s(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,(0,n.Z)(s.key),s)}}function a(e,r,t){return r&&s(e.prototype,r),t&&s(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}},83366:function(e,r,t){"use strict";function n(e,r){if(null==e)return{};var t,n,s=function(e,r){if(null==e)return{};var t,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(s[t]=e[t]);return s}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}t.d(r,{Z:function(){return n}})},71703:function(e,r,t){"use strict";t.d(r,{Ue:function(){return f}});var n=function(e){var r,t=new Set,n=function(e,n){var s="function"==typeof e?e(r):e;if(!Object.is(s,r)){var a=r;r=(null!=n?n:"object"!=typeof s||null===s)?s:Object.assign({},r,s),t.forEach(function(e){return e(r,a)})}},s=function(){return r},a={setState:n,getState:s,getInitialState:function(){return o},subscribe:function(e){return t.add(e),function(){return t.delete(e)}},destroy:function(){console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},o=r=e(n,s,a);return a},s=t(2265),a=t(3029),o=s.useDebugValue,i=a.useSyncExternalStoreWithSelector,c=!1,u=function(e){return e},l=function(e){"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");var r="function"==typeof e?e?n(e):n:e,t=function(e,t){return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,t=arguments.length>2?arguments[2]:void 0;t&&!c&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),c=!0);var n=i(e.subscribe,e.getState,e.getServerState||e.getInitialState,r,t);return o(n),n}(r,e,t)};return Object.assign(t,r),t},f=function(e){return e?l(e):l}}},function(e){e.O(0,[816,880,971,529,744],function(){return e(e.s=37963)}),_N_E=e.O()}]);