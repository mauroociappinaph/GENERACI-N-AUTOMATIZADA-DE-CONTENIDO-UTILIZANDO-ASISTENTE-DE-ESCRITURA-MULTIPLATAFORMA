(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[882],{95730:function(e,t,r){Promise.resolve().then(r.bind(r,47322))},47322:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return J}});var a=r(50090),s=r(30837),n=r.n(s),l=r(2265),i=r(36118),c=r(19245),o=r(84513),d=r(55010),u=r(35685),m=r(10026),x=r(5813),p=new(function(){var e,t,r,s,l,i,c,o;function d(){(0,u.Z)(this,d)}return(0,m.Z)(d,[{key:"getReportTemplates",value:(e=(0,a.Z)(n().mark(function e(){var t,r;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.x1.get("/reports/templates");case 2:return r=e.sent,e.abrupt("return",(null===(t=r.data)||void 0===t?void 0:t.data)||[]);case 4:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})},{key:"generateReport",value:(t=(0,a.Z)(n().mark(function e(t){var r,a,s,l;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.x1.post("/reports/generate",t);case 2:if(!(!(null!==(r=(s=e.sent).data)&&void 0!==r&&r.success)||!(null!==(a=s.data)&&void 0!==a&&a.data))){e.next=5;break}throw Error((null===(l=s.data)||void 0===l||null===(l=l.error)||void 0===l?void 0:l.message)||"Failed to generate report");case 5:return e.abrupt("return",s.data.data);case 6:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})},{key:"previewReport",value:(r=(0,a.Z)(n().mark(function e(t){var r,a,s,l,i,c=arguments;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,x.x1.post("/reports/preview",{templateId:t,parameters:s});case 3:if(!(!(null!==(r=(l=e.sent).data)&&void 0!==r&&r.success)||!(null!==(a=l.data)&&void 0!==a&&a.data))){e.next=6;break}throw Error((null===(i=l.data)||void 0===i||null===(i=i.error)||void 0===i?void 0:i.message)||"Failed to preview report");case 6:return e.abrupt("return",l.data.data);case 7:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})},{key:"downloadReport",value:(s=(0,a.Z)(n().mark(function e(t){var r,a,s,l,i,c,o,d,u;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="http://localhost:3001",a=localStorage.getItem("accessToken"),e.next=4,fetch("".concat(r,"/reports/download/").concat(t),{method:"GET",headers:{Authorization:a?"Bearer ".concat(a):""}});case 4:if((s=e.sent).ok){e.next=7;break}throw Error("Failed to download report");case 7:return e.next=9,s.blob();case 9:l=e.sent,i=window.URL.createObjectURL(l),(c=document.createElement("a")).href=i,o=s.headers.get("content-disposition"),d="report-".concat(t),o&&(u=o.match(/filename="(.+)"/))&&(d=u[1]),c.download=d,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(i);case 21:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)})},{key:"createScheduledReport",value:(l=(0,a.Z)(n().mark(function e(t){var r,a,s,l;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.x1.post("/reports/schedule",t);case 2:if(!(!(null!==(r=(s=e.sent).data)&&void 0!==r&&r.success)||!(null!==(a=s.data)&&void 0!==a&&a.data))){e.next=5;break}throw Error((null===(l=s.data)||void 0===l||null===(l=l.error)||void 0===l?void 0:l.message)||"Failed to create scheduled report");case 5:return e.abrupt("return",s.data.data);case 6:case"end":return e.stop()}},e)})),function(e){return l.apply(this,arguments)})},{key:"getScheduledReports",value:(i=(0,a.Z)(n().mark(function e(){var t,r;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.x1.get("/reports/scheduled");case 2:return r=e.sent,e.abrupt("return",(null===(t=r.data)||void 0===t?void 0:t.data)||[]);case 4:case"end":return e.stop()}},e)})),function(){return i.apply(this,arguments)})},{key:"updateScheduledReport",value:(c=(0,a.Z)(n().mark(function e(t,r){var a,s,l,i;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.x1.put("/reports/scheduled/".concat(t),r);case 2:if(!(!(null!==(a=(l=e.sent).data)&&void 0!==a&&a.success)||!(null!==(s=l.data)&&void 0!==s&&s.data))){e.next=5;break}throw Error((null===(i=l.data)||void 0===i||null===(i=i.error)||void 0===i?void 0:i.message)||"Failed to update scheduled report");case 5:return e.abrupt("return",l.data.data);case 6:case"end":return e.stop()}},e)})),function(e,t){return c.apply(this,arguments)})},{key:"deleteScheduledReport",value:(o=(0,a.Z)(n().mark(function e(t){var r,a,s;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.x1.delete("/reports/scheduled/".concat(t));case 2:if(null!==(r=(a=e.sent).data)&&void 0!==r&&r.success){e.next=5;break}throw Error((null===(s=a.data)||void 0===s||null===(s=s.error)||void 0===s?void 0:s.message)||"Failed to delete scheduled report");case 5:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)})},{key:"validateCronExpression",value:function(e){var t=e.trim().split(/\s+/);return 5===t.length||6===t.length}},{key:"describeCronExpression",value:function(e){return({"0 9 * * *":"Daily at 9:00 AM","0 9 * * 1":"Every Monday at 9:00 AM","0 9 1 * *":"First day of every month at 9:00 AM","0 9 * * 1-5":"Weekdays at 9:00 AM","0 */6 * * *":"Every 6 hours","0 0 * * 0":"Every Sunday at midnight"})[e]||"Custom schedule"}},{key:"getSuggestedSchedules",value:function(){return[{value:"0 9 * * *",label:"Daily",description:"Every day at 9:00 AM"},{value:"0 9 * * 1",label:"Weekly",description:"Every Monday at 9:00 AM"},{value:"0 9 1 * *",label:"Monthly",description:"First day of every month at 9:00 AM"},{value:"0 9 * * 1-5",label:"Weekdays",description:"Monday to Friday at 9:00 AM"},{value:"0 */6 * * *",label:"Every 6 hours",description:"Four times a day"},{value:"0 0 * * 0",label:"Weekly (Sunday)",description:"Every Sunday at midnight"}]}}]),d}()),h=r(57437);function f(e){var t=e.template,r=e.onClose;return(0,h.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Report Preview"}),(0,h.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:t.name})]}),(0,h.jsx)(c.z,{onClick:r,variant:"outline",size:"sm",children:"Close"})]})}function v(){return(0,h.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,h.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,h.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading preview..."})]})}function g(e){var t=e.error,r=e.onRetry;return(0,h.jsx)(i.Zb,{className:"p-4 border-red-200 bg-red-50",children:(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)("span",{className:"text-red-500",children:"⚠️"}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-red-800 font-medium",children:"Preview Error"}),(0,h.jsx)("p",{className:"text-red-600 text-sm",children:t}),(0,h.jsx)(c.z,{onClick:r,variant:"outline",size:"sm",className:"mt-2 border-red-300 text-red-700 hover:bg-red-100",children:"Retry"})]})]})})}function b(e){var t=e.preview;return(0,h.jsxs)(i.Zb,{className:"p-4 bg-blue-50 border-blue-200",children:[(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"font-medium text-blue-800",children:"Total Records:"}),(0,h.jsx)("span",{className:"ml-2 text-blue-700",children:t.totalRecords.toLocaleString()})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"font-medium text-blue-800",children:"Preview Records:"}),(0,h.jsx)("span",{className:"ml-2 text-blue-700",children:t.previewRecords.toLocaleString()})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"font-medium text-blue-800",children:"Generated:"}),(0,h.jsx)("span",{className:"ml-2 text-blue-700",children:new Date(t.generatedAt).toLocaleString()})]})]}),t.previewRecords<t.totalRecords&&(0,h.jsxs)("div",{className:"mt-2 text-sm text-blue-700",children:[(0,h.jsx)("span",{className:"font-medium",children:"Note:"})," This preview shows the first"," ",t.previewRecords," records. The full report will contain all"," ",t.totalRecords.toLocaleString()," records."]})]})}var j=r(78793);function y(e){var t=e.preview;if(!t||!t.data.length)return null;var r=Object.keys(t.data[0]),a=r.filter(function(e){return t.data.some(function(t){return"number"==typeof t[e]})});if(0===a.length)return null;var s=a[0],n=t.data.slice(0,10).map(function(e,t){return{name:e.name||e.id||"Item ".concat(t+1),value:e[s]||0}}),l=r.filter(function(e){return e.toLowerCase().includes("date")||e.toLowerCase().includes("time")||e.toLowerCase().includes("created")});if(l.length>0&&a.length>0){var c=t.data.slice(0,20).map(function(e,t){return{name:new Date(e[l[0]]).toLocaleDateString()||"Point ".concat(t+1),value:e[a[0]]||0}});return(0,h.jsxs)(i.Zb,{className:"p-4",children:[(0,h.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Data Visualization"}),(0,h.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,h.jsx)("div",{children:(0,h.jsx)(j.q9,{data:c,type:"line",title:"".concat(s," Trend"),height:250,showGrid:!0,showLegend:!1,animate:!0})}),(0,h.jsx)("div",{children:(0,h.jsx)(j.q9,{data:n,type:"bar",title:"".concat(s," Distribution"),height:250,showGrid:!0,showLegend:!1,animate:!0})})]})]})}return(0,h.jsxs)(i.Zb,{className:"p-4",children:[(0,h.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Data Visualization"}),(0,h.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,h.jsx)("div",{children:(0,h.jsx)(j.q9,{data:n,type:"bar",title:"".concat(s," Values"),height:250,showGrid:!0,showLegend:!1,animate:!0})}),(0,h.jsx)("div",{children:(0,h.jsx)(j.q9,{data:n,type:"pie",title:"".concat(s," Distribution"),height:250,showLegend:!0,animate:!0})})]})]})}function N(e){var t=e.preview;if(!t||!t.data.length)return(0,h.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,h.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCCA"}),(0,h.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No Data Available"}),(0,h.jsx)("p",{className:"text-sm",children:"No data matches the current parameters. Try adjusting your filters or parameters."})]});var r=Object.keys(t.data[0]),a=t.data.slice(0,10);return(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"font-medium text-blue-800",children:"Total Records:"}),(0,h.jsx)("span",{className:"ml-2 text-blue-700",children:t.totalRecords.toLocaleString()})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"font-medium text-blue-800",children:"Columns:"}),(0,h.jsx)("span",{className:"ml-2 text-blue-700",children:r.length})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"font-medium text-blue-800",children:"Preview Rows:"}),(0,h.jsx)("span",{className:"ml-2 text-blue-700",children:a.length})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"font-medium text-blue-800",children:"Generated:"}),(0,h.jsx)("span",{className:"ml-2 text-blue-700",children:new Date(t.generatedAt).toLocaleString()})]})]})}),(0,h.jsx)("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:(0,h.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,h.jsx)("thead",{className:"bg-gray-50",children:(0,h.jsx)("tr",{children:r.map(function(e){return(0,h.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.replace(/_/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()})},e)})})}),(0,h.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(function(e,t){return(0,h.jsx)("tr",{className:t%2==0?"bg-white":"bg-gray-50",children:r.map(function(t){var r;return(0,h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:null==(r=e[t])?"-":"boolean"==typeof r?r?"Yes":"No":"object"==typeof r?JSON.stringify(r):String(r)},t)})},t)})})]})}),t.data.length>10&&(0,h.jsx)("div",{className:"text-center py-4 bg-gray-50 border border-gray-200 rounded-lg",children:(0,h.jsxs)("p",{className:"text-sm text-gray-600",children:["Showing first ",10," rows of ",t.data.length," preview records. Full report will contain all ",t.totalRecords.toLocaleString()," records."]})})]})}function w(e){var t,r,s,o,d,u,m,x,j,w,C=e.template,k=e.parameters,S=e.onClose,O=(r=(t=(0,l.useState)(null))[0],s=t[1],d=(o=(0,l.useState)(!0))[0],u=o[1],x=(m=(0,l.useState)(null))[0],j=m[1],w=(0,l.useCallback)((0,a.Z)(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),j(null),e.next=5,p.previewReport(C.id,k);case 5:s(e.sent),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),j(e.t0 instanceof Error?e.t0.message:"Failed to load preview");case 12:return e.prev=12,u(!1),e.finish(12);case 15:case"end":return e.stop()}},e,null,[[0,9,12,15]])})),[C.id,k]),(0,l.useEffect)(function(){w()},[w]),{preview:r,loading:d,error:x,loadPreview:w}),D=O.preview,R=O.loading,E=O.error,P=O.loadPreview;return(0,h.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,h.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[(0,h.jsx)(f,{template:C,onClose:S}),(0,h.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[R&&(0,h.jsx)(v,{}),E&&(0,h.jsx)(g,{error:E,onRetry:P}),D&&!R&&!E&&(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsx)(b,{preview:D}),(0,h.jsx)(y,{preview:D}),(0,h.jsx)(i.Zb,{className:"overflow-hidden",children:(0,h.jsx)(N,{preview:D})})]})]}),(0,h.jsxs)("div",{className:"flex justify-end space-x-3 p-6 border-t bg-gray-50",children:[(0,h.jsx)(c.z,{onClick:S,variant:"outline",children:"Close"}),D&&(0,h.jsx)(c.z,{onClick:function(){S()},children:"Generate Full Report"})]})]})})}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach(function(t){(0,o.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function O(e){var t,r,s=e.templates;e.onRefresh;var u=(0,l.useState)(null),m=u[0],x=u[1],f=(0,l.useState)({}),v=f[0],g=f[1],b=(0,l.useState)("pdf"),j=b[0],y=b[1],N=(0,l.useState)("download"),k=N[0],O=N[1],D=(0,l.useState)(""),R=D[0],E=D[1],P=(0,l.useState)(!1),Z=P[0],A=P[1],I=(0,l.useState)(null),z=I[0],L=I[1],F=(0,l.useState)(null),q=F[0],M=F[1],T=(0,l.useState)(!1),U=T[0],G=T[1],B=function(e){x(e),y(e.formats[0]||"pdf");var t={};e.parameters.forEach(function(e){void 0!==e.defaultValue&&(t[e.name]=e.defaultValue)}),g(t),L(null),M(null)},V=function(e,t){g(function(r){return S(S({},r),{},(0,o.Z)({},e,t))})},_=function(){if(!m)return!1;var e,t=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return C(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,void 0)}}(e))){r&&(e=r);var a=0,s=function(){};return{s:s,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:s}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,l=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){i=!0,n=e},f:function(){try{l||null==r.return||r.return()}finally{if(i)throw n}}}}(m.parameters);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(r.required&&!v[r.name])return L('Parameter "'.concat(r.label,'" is required')),!1}}catch(e){t.e(e)}finally{t.f()}return"email"!==k||!!R||(L("Email address is required for email delivery"),!1)},J=(t=(0,a.Z)(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!m||!_())){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,A(!0),L(null),e.next=7,p.previewReport(m.id,v);case 7:G(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),L(e.t0 instanceof Error?e.t0.message:"Failed to preview report");case 13:return e.prev=13,A(!1),e.finish(13);case 16:case"end":return e.stop()}},e,null,[[2,10,13,16]])})),function(){return t.apply(this,arguments)}),W=(r=(0,a.Z)(n().mark(function e(){var t,r;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!m||!_())){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,A(!0),L(null),M(null),t={templateId:m.id,parameters:v,format:j,deliveryMethod:k,email:"email"===k?R:void 0},e.next=9,p.generateReport(t);case 9:if(r=e.sent,"download"!==k){e.next=16;break}return e.next=13,p.downloadReport(r.reportId);case 13:M("Report generated and downloaded successfully!"),e.next=17;break;case 16:M("Report generated and sent to ".concat(R,"!"));case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),L(e.t0 instanceof Error?e.t0.message:"Failed to generate report");case 22:return e.prev=22,A(!1),e.finish(22);case 25:case"end":return e.stop()}},e,null,[[2,19,22,25]])})),function(){return r.apply(this,arguments)}),Y=function(e){var t,r=v[e.name]||"";switch(e.type){case"string":return(0,h.jsx)(d.I,{type:"text",value:r,onChange:function(t){return V(e.name,t.target.value)},placeholder:"Enter ".concat(e.label.toLowerCase()),required:e.required});case"number":return(0,h.jsx)(d.I,{type:"number",value:r,onChange:function(t){return V(e.name,Number(t.target.value))},placeholder:"Enter ".concat(e.label.toLowerCase()),required:e.required});case"date":return(0,h.jsx)(d.I,{type:"date",value:r,onChange:function(t){return V(e.name,t.target.value)},required:e.required});case"boolean":return(0,h.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,h.jsx)("input",{type:"checkbox",checked:r||!1,onChange:function(t){return V(e.name,t.target.checked)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,h.jsx)("span",{className:"text-sm text-gray-700",children:"Yes"})]});case"select":return(0,h.jsxs)("select",{value:r,onChange:function(t){return V(e.name,t.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:e.required,children:[(0,h.jsxs)("option",{value:"",children:["Select ",e.label.toLowerCase()]}),null===(t=e.options)||void 0===t?void 0:t.map(function(e){return(0,h.jsx)("option",{value:e.value,children:e.label},e.value)})]});default:return(0,h.jsx)(d.I,{type:"text",value:r,onChange:function(t){return V(e.name,t.target.value)},placeholder:"Enter ".concat(e.label.toLowerCase()),required:e.required})}};return(0,h.jsxs)("div",{className:"space-y-6",children:[(0,h.jsxs)(i.Zb,{className:"p-6",children:[(0,h.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Select Report Template"}),(0,h.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(function(e){return(0,h.jsxs)("div",{onClick:function(){return B(e)},className:"\n                p-4 border rounded-lg cursor-pointer transition-colors\n                ".concat((null==m?void 0:m.id)===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50","\n              "),children:[(0,h.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:e.name}),e.description&&(0,h.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,h.jsx)("div",{className:"flex flex-wrap gap-1",children:e.formats.map(function(e){return(0,h.jsx)("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded",children:e.toUpperCase()},e)})})]},e.id)})})]}),m&&(0,h.jsxs)(i.Zb,{className:"p-6",children:[(0,h.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Configure Report"}),m.parameters.length>0&&(0,h.jsxs)("div",{className:"mb-6",children:[(0,h.jsx)("h3",{className:"text-lg font-medium mb-3",children:"Parameters"}),(0,h.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.parameters.map(function(e){return(0,h.jsxs)("div",{children:[(0,h.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,e.required&&(0,h.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),Y(e)]},e.name)})})]}),(0,h.jsxs)("div",{className:"mb-6",children:[(0,h.jsx)("h3",{className:"text-lg font-medium mb-3",children:"Output Format"}),(0,h.jsx)("div",{className:"flex space-x-4",children:m.formats.map(function(e){return(0,h.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,h.jsx)("input",{type:"radio",name:"format",value:e,checked:j===e,onChange:function(e){return y(e.target.value)},className:"text-blue-600 focus:ring-blue-500"}),(0,h.jsx)("span",{className:"text-sm text-gray-700",children:e.toUpperCase()})]},e)})})]}),(0,h.jsxs)("div",{className:"mb-6",children:[(0,h.jsx)("h3",{className:"text-lg font-medium mb-3",children:"Delivery Method"}),(0,h.jsxs)("div",{className:"space-y-3",children:[(0,h.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,h.jsx)("input",{type:"radio",name:"delivery",value:"download",checked:"download"===k,onChange:function(e){return O(e.target.value)},className:"text-blue-600 focus:ring-blue-500"}),(0,h.jsx)("span",{className:"text-sm text-gray-700",children:"Download immediately"})]}),(0,h.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,h.jsx)("input",{type:"radio",name:"delivery",value:"email",checked:"email"===k,onChange:function(e){return O(e.target.value)},className:"text-blue-600 focus:ring-blue-500"}),(0,h.jsx)("span",{className:"text-sm text-gray-700",children:"Send by email"})]}),"email"===k&&(0,h.jsx)("div",{className:"ml-6",children:(0,h.jsx)(d.I,{type:"email",value:R,onChange:function(e){return E(e.target.value)},placeholder:"Enter email address",className:"max-w-sm"})})]})]}),(0,h.jsxs)("div",{className:"flex space-x-3",children:[(0,h.jsx)(c.z,{onClick:J,variant:"outline",disabled:Z,children:Z?"Loading...":"Preview"}),(0,h.jsx)(c.z,{onClick:W,disabled:Z,children:Z?"Generating...":"Generate Report"})]}),z&&(0,h.jsx)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,h.jsx)("p",{className:"text-red-800 text-sm",children:z})}),q&&(0,h.jsx)("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-md",children:(0,h.jsx)("p",{className:"text-green-800 text-sm",children:q})})]}),U&&m&&(0,h.jsx)(w,{template:m,parameters:v,onClose:function(){return G(!1)}})]})}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach(function(t){(0,o.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function E(e){var t=e.template;return(0,h.jsxs)("div",{className:"border-b pb-4",children:[(0,h.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:t.name}),t.description&&(0,h.jsx)("p",{className:"text-gray-600 mt-1",children:t.description})]})}function P(e){var t=e.parameters,r=e.values,a=e.validationErrors,s=e.onParameterChange;if(0===t.length)return null;var n=function(e){var t,n=r[e.name]||"",l=a[e.name],i="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ".concat(l?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-blue-500");switch(e.type){case"string":return(0,h.jsxs)("div",{children:[(0,h.jsx)(d.I,{type:"text",value:n,onChange:function(t){return s(e.name,t.target.value)},placeholder:"Enter ".concat(e.label.toLowerCase()),className:l?"border-red-300 focus:ring-red-500":""}),l&&(0,h.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l})]});case"number":return(0,h.jsxs)("div",{children:[(0,h.jsx)(d.I,{type:"number",value:n,onChange:function(t){return s(e.name,Number(t.target.value))},placeholder:"Enter ".concat(e.label.toLowerCase()),className:l?"border-red-300 focus:ring-red-500":""}),l&&(0,h.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l})]});case"date":return(0,h.jsxs)("div",{children:[(0,h.jsx)(d.I,{type:"date",value:n,onChange:function(t){return s(e.name,t.target.value)},className:l?"border-red-300 focus:ring-red-500":""}),l&&(0,h.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l})]});case"boolean":return(0,h.jsxs)("div",{children:[(0,h.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,h.jsx)("input",{type:"checkbox",checked:n||!1,onChange:function(t){return s(e.name,t.target.checked)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,h.jsx)("span",{className:"text-sm text-gray-700",children:"Yes"})]}),l&&(0,h.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l})]});case"select":return(0,h.jsxs)("div",{children:[(0,h.jsxs)("select",{value:n,onChange:function(t){return s(e.name,t.target.value)},className:i,children:[(0,h.jsxs)("option",{value:"",children:["Select ",e.label.toLowerCase()]}),null===(t=e.options)||void 0===t?void 0:t.map(function(e){return(0,h.jsx)("option",{value:e.value,children:e.label},e.value)})]}),l&&(0,h.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l})]});default:return(0,h.jsxs)("div",{children:[(0,h.jsx)(d.I,{type:"text",value:n,onChange:function(t){return s(e.name,t.target.value)},placeholder:"Enter ".concat(e.label.toLowerCase()),className:l?"border-red-300 focus:ring-red-500":""}),l&&(0,h.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l})]})}};return(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Report Parameters"}),(0,h.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(function(e){return(0,h.jsxs)("div",{children:[(0,h.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.label,e.required&&(0,h.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),n(e)]},e.name)})})]})}function Z(e){var t=e.formats,r=e.selectedFormat,a=e.onFormatChange,s=function(e){switch(e){case"pdf":default:return"\uD83D\uDCC4";case"excel":return"\uD83D\uDCCA";case"csv":return"\uD83D\uDCCB"}};return(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Output Format"}),(0,h.jsx)("div",{className:"grid grid-cols-3 gap-4",children:t.map(function(e){return(0,h.jsxs)("label",{className:"\n              flex items-center justify-center p-4 border rounded-lg cursor-pointer transition-colors\n              ".concat(r===e?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50","\n            "),children:[(0,h.jsx)("input",{type:"radio",name:"format",value:e,checked:r===e,onChange:function(e){return a(e.target.value)},className:"sr-only"}),(0,h.jsxs)("div",{className:"text-center",children:[(0,h.jsx)("div",{className:"text-2xl mb-2",children:s(e)}),(0,h.jsx)("span",{className:"font-medium",children:e.toUpperCase()})]})]},e)})})]})}function A(e){var t=e.deliveryMethod,r=e.email,a=e.emailError,s=e.onDeliveryMethodChange,n=e.onEmailChange;return(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Delivery Method"}),(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsxs)("label",{className:"flex items-start space-x-3",children:[(0,h.jsx)("input",{type:"radio",name:"delivery",value:"download",checked:"download"===t,onChange:function(e){return s(e.target.value)},className:"mt-1 text-blue-600 focus:ring-blue-500"}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"font-medium text-gray-900",children:"Download immediately"}),(0,h.jsx)("p",{className:"text-sm text-gray-600",children:"The report will be generated and downloaded to your device"})]})]}),(0,h.jsxs)("label",{className:"flex items-start space-x-3",children:[(0,h.jsx)("input",{type:"radio",name:"delivery",value:"email",checked:"email"===t,onChange:function(e){return s(e.target.value)},className:"mt-1 text-blue-600 focus:ring-blue-500"}),(0,h.jsxs)("div",{className:"flex-1",children:[(0,h.jsx)("span",{className:"font-medium text-gray-900",children:"Send by email"}),(0,h.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"The report will be sent to the specified email address"}),"email"===t&&(0,h.jsxs)("div",{children:[(0,h.jsx)(d.I,{type:"email",value:r||"",onChange:function(e){return n(e.target.value)},placeholder:"Enter email address",className:a?"border-red-300 focus:ring-red-500":""}),a&&(0,h.jsx)("p",{className:"mt-1 text-sm text-red-600",children:a})]})]})]})]})]})}function I(e){var t,r,a,s,n,d,u,m,x,p=e.template,f=e.onConfigurationChange,v=e.onPreview,g=e.onGenerate,b=e.loading,j=void 0!==b&&b,y=e.error,N=void 0===y?null:y,w=(r=(t={template:p,onConfigurationChange:f}).template,a=t.onConfigurationChange,n=(s=(0,l.useState)({templateId:r.id,parameters:{},format:r.formats[0]||"pdf",deliveryMethod:"download"}))[0],d=s[1],m=(u=(0,l.useState)({}))[0],x=u[1],(0,l.useEffect)(function(){var e={};r.parameters.forEach(function(t){void 0!==t.defaultValue&&(e[t.name]=t.defaultValue)});var t=R(R({},n),{},{templateId:r.id,parameters:e,format:r.formats[0]||"pdf"});d(t),a(t)},[r.id]),{config:n,validationErrors:m,handleParameterChange:function(e,t){var r=R(R({},n),{},{parameters:R(R({},n.parameters),{},(0,o.Z)({},e,t))});d(r),a(r),m[e]&&x(function(t){var r=R({},t);return delete r[e],r})},handleFormatChange:function(e){var t=R(R({},n),{},{format:e});d(t),a(t)},handleDeliveryMethodChange:function(e){var t=R(R({},n),{},{deliveryMethod:e});d(t),a(t)},handleEmailChange:function(e){var t=R(R({},n),{},{email:e});d(t),a(t)},validateConfiguration:function(){var e={};return r.parameters.forEach(function(t){t.required&&!n.parameters[t.name]&&(e[t.name]="".concat(t.label," is required"))}),"email"!==n.deliveryMethod||n.email||(e.email="Email address is required for email delivery"),x(e),0===Object.keys(e).length}}),C=w.config,k=w.validationErrors,S=w.handleParameterChange,O=w.handleFormatChange,D=w.handleDeliveryMethodChange,I=w.handleEmailChange,z=w.validateConfiguration;return(0,h.jsx)(i.Zb,{className:"p-6",children:(0,h.jsxs)("div",{className:"space-y-6",children:[(0,h.jsx)(E,{template:p}),(0,h.jsx)(P,{parameters:p.parameters,values:C.parameters,validationErrors:k,onParameterChange:S}),(0,h.jsx)(Z,{formats:p.formats,selectedFormat:C.format,onFormatChange:O}),(0,h.jsx)(A,{deliveryMethod:C.deliveryMethod,email:C.email,emailError:k.email,onDeliveryMethodChange:D,onEmailChange:I}),N&&(0,h.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)("span",{className:"text-red-500",children:"⚠️"}),(0,h.jsx)("p",{className:"text-red-800 text-sm",children:N})]})}),(0,h.jsxs)("div",{className:"flex justify-between pt-4 border-t",children:[(0,h.jsxs)(c.z,{onClick:function(){z()&&v()},variant:"outline",disabled:j,className:"flex items-center space-x-2",children:[(0,h.jsx)("span",{children:"\uD83D\uDC41️"}),(0,h.jsx)("span",{children:j?"Loading...":"Preview Report"})]}),(0,h.jsxs)(c.z,{onClick:function(){z()&&g()},disabled:j,className:"flex items-center space-x-2",children:[(0,h.jsx)("span",{children:"\uD83D\uDE80"}),(0,h.jsx)("span",{children:j?"Generating...":"Generate Report"})]})]})]})})}function z(e){var t,r,s=e.templates,o=(0,l.useState)(null),d=o[0],u=o[1],m=(0,l.useState)(null),x=m[0],f=m[1],v=(0,l.useState)(!1),g=v[0],b=v[1],j=(0,l.useState)(!1),y=j[0],N=j[1],C=(0,l.useState)(null),k=C[0],S=C[1],O=(0,l.useState)(null),D=O[0],R=O[1],E=function(e){u(e),b(!1),S(null),R(null)},P=(t=(0,a.Z)(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!d||!x)){e.next=2;break}return e.abrupt("return");case 2:try{N(!0),S(null),b(!0)}catch(e){S(e instanceof Error?e.message:"Failed to preview report")}finally{N(!1)}case 3:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),Z=(r=(0,a.Z)(n().mark(function e(){var t,r;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!d||!x)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,N(!0),S(null),R(null),t={templateId:x.templateId,parameters:x.parameters,format:x.format,deliveryMethod:x.deliveryMethod,email:x.email},e.next=9,p.generateReport(t);case 9:if(r=e.sent,"download"!==x.deliveryMethod){e.next=16;break}return e.next=13,p.downloadReport(r.reportId);case 13:R("Report generated and downloaded successfully!"),e.next=17;break;case 16:R("Report generated and sent to ".concat(x.email,"!"));case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),S(e.t0 instanceof Error?e.t0.message:"Failed to generate report");case 22:return e.prev=22,N(!1),e.finish(22);case 25:case"end":return e.stop()}},e,null,[[2,19,22,25]])})),function(){return r.apply(this,arguments)});return(0,h.jsxs)("div",{className:"space-y-6",children:[(0,h.jsx)(i.Zb,{className:"p-6",children:(0,h.jsxs)("div",{className:"text-center",children:[(0,h.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Report Configuration"}),(0,h.jsx)("p",{className:"text-gray-600",children:"Configure and customize your reports with advanced options, preview before generating, and set up automated delivery."})]})}),(0,h.jsxs)(i.Zb,{className:"p-6",children:[(0,h.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"1. Select Report Template"}),(0,h.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(function(e){return(0,h.jsxs)("div",{onClick:function(){return E(e)},className:"\n                p-6 border rounded-lg cursor-pointer transition-all duration-200 hover:shadow-md\n                ".concat((null==d?void 0:d.id)===e.id?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-gray-300 hover:bg-gray-50","\n              "),children:[(0,h.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,h.jsx)("h4",{className:"font-semibold text-gray-900",children:e.name}),(null==d?void 0:d.id)===e.id&&(0,h.jsx)("span",{className:"text-blue-500 text-xl",children:"✓"})]}),e.description&&(0,h.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),(0,h.jsxs)("div",{className:"space-y-2",children:[(0,h.jsx)("div",{className:"flex flex-wrap gap-1",children:e.formats.map(function(e){return(0,h.jsx)("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded",children:e.toUpperCase()},e)})}),e.parameters.length>0&&(0,h.jsxs)("div",{className:"text-xs text-gray-500",children:[e.parameters.length," parameter",1!==e.parameters.length?"s":""]})]})]},e.id)})}),0===s.length&&(0,h.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,h.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCCA"}),(0,h.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No Report Templates Available"}),(0,h.jsx)("p",{className:"text-sm",children:"Contact your administrator to set up report templates."})]})]}),d&&(0,h.jsxs)("div",{className:"space-y-6",children:[(0,h.jsxs)(i.Zb,{className:"p-6",children:[(0,h.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"2. Configure Report Settings"}),(0,h.jsx)(I,{template:d,onConfigurationChange:function(e){f(e)},onPreview:P,onGenerate:Z,loading:y,error:k})]}),D&&(0,h.jsx)(i.Zb,{className:"p-4 border-green-200 bg-green-50",children:(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)("span",{className:"text-green-500",children:"✅"}),(0,h.jsx)("p",{className:"text-green-800 text-sm",children:D})]})}),g&&x&&(0,h.jsxs)(i.Zb,{className:"p-6",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,h.jsx)("h3",{className:"text-xl font-semibold",children:"3. Report Preview"}),(0,h.jsx)(c.z,{onClick:function(){return b(!1)},variant:"outline",size:"sm",children:"Close Preview"})]}),(0,h.jsx)(w,{template:d,parameters:x.parameters,onClose:function(){return b(!1)}})]}),(0,h.jsxs)(i.Zb,{className:"p-6",children:[(0,h.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Quick Actions"}),(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,h.jsxs)(c.z,{onClick:P,variant:"outline",disabled:y||!x,className:"flex items-center justify-center space-x-2 p-4 h-auto",children:[(0,h.jsx)("span",{className:"text-2xl",children:"\uD83D\uDC41️"}),(0,h.jsxs)("div",{className:"text-left",children:[(0,h.jsx)("div",{className:"font-medium",children:"Preview Report"}),(0,h.jsx)("div",{className:"text-sm text-gray-600",children:"See data before generating"})]})]}),(0,h.jsxs)(c.z,{onClick:Z,disabled:y||!x,className:"flex items-center justify-center space-x-2 p-4 h-auto",children:[(0,h.jsx)("span",{className:"text-2xl",children:"\uD83D\uDE80"}),(0,h.jsxs)("div",{className:"text-left",children:[(0,h.jsx)("div",{className:"font-medium",children:"Generate Now"}),(0,h.jsx)("div",{className:"text-sm text-blue-100",children:"Create and download report"})]})]}),(0,h.jsxs)(c.z,{onClick:function(){console.log("Schedule report with config:",x)},variant:"outline",disabled:y||!x,className:"flex items-center justify-center space-x-2 p-4 h-auto",children:[(0,h.jsx)("span",{className:"text-2xl",children:"⏰"}),(0,h.jsxs)("div",{className:"text-left",children:[(0,h.jsx)("div",{className:"font-medium",children:"Schedule Report"}),(0,h.jsx)("div",{className:"text-sm text-gray-600",children:"Set up automatic generation"})]})]})]})]}),x&&(0,h.jsxs)(i.Zb,{className:"p-6 bg-gray-50",children:[(0,h.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Configuration Summary"}),(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"font-medium text-gray-700",children:"Template:"}),(0,h.jsx)("span",{className:"ml-2 text-gray-900",children:d.name})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"font-medium text-gray-700",children:"Format:"}),(0,h.jsx)("span",{className:"ml-2 text-gray-900",children:x.format.toUpperCase()})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"font-medium text-gray-700",children:"Delivery:"}),(0,h.jsx)("span",{className:"ml-2 text-gray-900",children:"download"===x.deliveryMethod?"Download":"Email to ".concat(x.email)})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"font-medium text-gray-700",children:"Parameters:"}),(0,h.jsxs)("span",{className:"ml-2 text-gray-900",children:[Object.keys(x.parameters).length," configured"]})]})]})]})]})]})}var L=r(86583);function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach(function(t){(0,o.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function T(e){var t,r=e.templates,s=e.onClose,i=e.onSave,u=e.editingReport,m=(0,l.useState)(1),x=m[0],f=m[1],v=(0,l.useState)({templateId:(null==u?void 0:u.templateId)||"",parameters:(null==u?void 0:u.parameters)||{},format:(null==u?void 0:u.format)||"pdf",schedule:(null==u?void 0:u.schedule)||"0 9 * * *",recipients:(null==u?void 0:u.recipients)||[]}),g=v[0],b=v[1],j=(0,l.useState)(""),y=j[0],N=j[1],w=(0,l.useState)(!1),C=w[0],k=w[1],S=(0,l.useState)(null),O=S[0],D=S[1],R=r.find(function(e){return e.id===g.templateId}),E=[{id:1,title:"Select Template",description:"Choose the report template"},{id:2,title:"Configure Parameters",description:"Set report parameters"},{id:3,title:"Schedule Settings",description:"Set frequency and format"},{id:4,title:"Recipients",description:"Add email recipients"}],P=function(){switch(D(null),x){case 1:if(!g.templateId)return D("Please select a report template"),!1;break;case 2:if(R){var e,t=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return M(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,void 0)}}(e))){r&&(e=r);var a=0,s=function(){};return{s:s,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:s}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,l=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){i=!0,n=e},f:function(){try{l||null==r.return||r.return()}finally{if(i)throw n}}}}(R.parameters);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(r.required&&!g.parameters[r.name])return D('Parameter "'.concat(r.label,'" is required')),!1}}catch(e){t.e(e)}finally{t.f()}}break;case 3:if(!p.validateCronExpression(g.schedule))return D("Invalid schedule format"),!1;break;case 4:if(0===g.recipients.length)return D("Please add at least one recipient"),!1}return!0},Z=(t=(0,a.Z)(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(P()){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,k(!0),D(null),!u){e.next=10;break}return e.next=8,p.updateScheduledReport(u.id,g);case 8:e.next=12;break;case 10:return e.next=12,p.createScheduledReport(g);case 12:i(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),D(e.t0 instanceof Error?e.t0.message:"Failed to save scheduled report");case 18:return e.prev=18,k(!1),e.finish(18);case 21:case"end":return e.stop()}},e,null,[[2,15,18,21]])})),function(){return t.apply(this,arguments)}),A=function(){y&&!g.recipients.includes(y)&&(b(function(e){return q(q({},e),{},{recipients:[].concat((0,L.Z)(e.recipients),[y])})}),N(""))},I=function(e){b(function(t){return q(q({},t),{},{recipients:t.recipients.filter(function(t){return t!==e})})})},z=function(e){var t,r=g.parameters[e.name]||"";switch(e.type){case"string":return(0,h.jsx)(d.I,{type:"text",value:r,onChange:function(t){return b(function(r){return q(q({},r),{},{parameters:q(q({},r.parameters),{},(0,o.Z)({},e.name,t.target.value))})})},placeholder:"Enter ".concat(e.label.toLowerCase())});case"number":return(0,h.jsx)(d.I,{type:"number",value:r,onChange:function(t){return b(function(r){return q(q({},r),{},{parameters:q(q({},r.parameters),{},(0,o.Z)({},e.name,Number(t.target.value)))})})},placeholder:"Enter ".concat(e.label.toLowerCase())});case"date":return(0,h.jsx)(d.I,{type:"date",value:r,onChange:function(t){return b(function(r){return q(q({},r),{},{parameters:q(q({},r.parameters),{},(0,o.Z)({},e.name,t.target.value))})})}});case"boolean":return(0,h.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,h.jsx)("input",{type:"checkbox",checked:r||!1,onChange:function(t){return b(function(r){return q(q({},r),{},{parameters:q(q({},r.parameters),{},(0,o.Z)({},e.name,t.target.checked))})})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,h.jsx)("span",{className:"text-sm text-gray-700",children:"Yes"})]});case"select":return(0,h.jsxs)("select",{value:r,onChange:function(t){return b(function(r){return q(q({},r),{},{parameters:q(q({},r.parameters),{},(0,o.Z)({},e.name,t.target.value))})})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,h.jsxs)("option",{value:"",children:["Select ",e.label.toLowerCase()]}),null===(t=e.options)||void 0===t?void 0:t.map(function(e){return(0,h.jsx)("option",{value:e.value,children:e.label},e.value)})]});default:return(0,h.jsx)(d.I,{type:"text",value:r,onChange:function(t){return b(function(r){return q(q({},r),{},{parameters:q(q({},r.parameters),{},(0,o.Z)({},e.name,t.target.value))})})},placeholder:"Enter ".concat(e.label.toLowerCase())})}};return(0,h.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,h.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,h.jsxs)("div",{children:[(0,h.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:[u?"Edit":"Create"," Scheduled Report"]}),(0,h.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Step ",x," of ",4,":"," ",E[x-1].description]})]}),(0,h.jsx)(c.z,{onClick:s,variant:"outline",size:"sm",children:"Cancel"})]}),(0,h.jsx)("div",{className:"px-6 py-4 border-b bg-gray-50",children:(0,h.jsx)("div",{className:"flex items-center justify-between",children:E.map(function(e,t){return(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)("div",{className:"\n                    flex items-center justify-center w-8 h-8 rounded-full text-sm font-medium\n                    ".concat(x>=e.id?"bg-blue-600 text-white":"bg-gray-200 text-gray-600","\n                  "),children:x>e.id?"✓":e.id}),(0,h.jsx)("div",{className:"ml-2 hidden sm:block",children:(0,h.jsx)("div",{className:"text-sm font-medium ".concat(x>=e.id?"text-blue-600":"text-gray-500"),children:e.title})}),t<E.length-1&&(0,h.jsx)("div",{className:"w-12 h-0.5 mx-4 ".concat(x>e.id?"bg-blue-600":"bg-gray-200")})]},e.id)})})}),(0,h.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[function(){switch(x){case 1:return(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Select Report Template"}),(0,h.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(function(e){return(0,h.jsxs)("div",{onClick:function(){return b(function(t){return q(q({},t),{},{templateId:e.id})})},className:"\n                    p-4 border rounded-lg cursor-pointer transition-colors\n                    ".concat(g.templateId===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50","\n                  "),children:[(0,h.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:e.name}),e.description&&(0,h.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,h.jsx)("div",{className:"flex flex-wrap gap-1",children:e.formats.map(function(e){return(0,h.jsx)("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded",children:e.toUpperCase()},e)})})]},e.id)})})]});case 2:return(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Configure Parameters"}),R&&R.parameters.length>0?(0,h.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:R.parameters.map(function(e){return(0,h.jsxs)("div",{children:[(0,h.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,e.required&&(0,h.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),z(e)]},e.name)})}):(0,h.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,h.jsx)("p",{children:"This template doesn't require any parameters."})})]});case 3:return(0,h.jsxs)("div",{className:"space-y-6",children:[(0,h.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Schedule Settings"}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Output Format"}),(0,h.jsx)("div",{className:"grid grid-cols-3 gap-4",children:null==R?void 0:R.formats.map(function(e){return(0,h.jsxs)("label",{className:"\n                      flex items-center justify-center p-4 border rounded-lg cursor-pointer transition-colors\n                      ".concat(g.format===e?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50","\n                    "),children:[(0,h.jsx)("input",{type:"radio",name:"format",value:e,checked:g.format===e,onChange:function(e){return b(function(t){return q(q({},t),{},{format:e.target.value})})},className:"sr-only"}),(0,h.jsxs)("div",{className:"text-center",children:[(0,h.jsxs)("div",{className:"text-2xl mb-2",children:["pdf"===e&&"\uD83D\uDCC4","excel"===e&&"\uD83D\uDCCA","csv"===e&&"\uD83D\uDCCB"]}),(0,h.jsx)("span",{className:"font-medium",children:e.toUpperCase()})]})]},e)})})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Schedule Frequency"}),(0,h.jsxs)("div",{className:"space-y-3",children:[p.getSuggestedSchedules().map(function(e){return(0,h.jsxs)("label",{className:"\n                      flex items-start p-4 border rounded-lg cursor-pointer transition-colors\n                      ".concat(g.schedule===e.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50","\n                    "),children:[(0,h.jsx)("input",{type:"radio",name:"schedule",value:e.value,checked:g.schedule===e.value,onChange:function(e){return b(function(t){return q(q({},t),{},{schedule:e.target.value})})},className:"mt-1 text-blue-600 focus:ring-blue-500"}),(0,h.jsxs)("div",{className:"ml-3",children:[(0,h.jsx)("div",{className:"font-medium text-gray-900",children:e.label}),(0,h.jsx)("div",{className:"text-sm text-gray-600",children:e.description})]})]},e.value)}),(0,h.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,h.jsxs)("label",{className:"flex items-center mb-2",children:[(0,h.jsx)("input",{type:"radio",name:"schedule",checked:!p.getSuggestedSchedules().some(function(e){return e.value===g.schedule}),onChange:function(){},className:"text-blue-600 focus:ring-blue-500"}),(0,h.jsx)("span",{className:"ml-2 font-medium text-gray-900",children:"Custom Schedule"})]}),(0,h.jsx)(d.I,{type:"text",value:g.schedule,onChange:function(e){return b(function(t){return q(q({},t),{},{schedule:e.target.value})})},placeholder:"Enter cron expression (e.g., 0 9 * * *)",className:"text-sm"}),(0,h.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Current:"," ",p.describeCronExpression(g.schedule)]})]})]})]})]});case 4:return(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Email Recipients"}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add Recipients"}),(0,h.jsxs)("div",{className:"flex space-x-2",children:[(0,h.jsx)(d.I,{type:"email",value:y,onChange:function(e){return N(e.target.value)},placeholder:"Enter email address",className:"flex-1",onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),A())}}),(0,h.jsx)(c.z,{type:"button",onClick:A,variant:"outline",children:"Add"})]})]}),g.recipients.length>0&&(0,h.jsxs)("div",{children:[(0,h.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Recipients (",g.recipients.length,")"]}),(0,h.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:g.recipients.map(function(e,t){return(0,h.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)("span",{className:"text-gray-600",children:"\uD83D\uDCE7"}),(0,h.jsx)("span",{className:"text-sm text-gray-900",children:e})]}),(0,h.jsx)(c.z,{type:"button",onClick:function(){return I(e)},variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:"Remove"})]},t)})})]}),0===g.recipients.length&&(0,h.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,h.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCE7"}),(0,h.jsx)("p",{children:"No recipients added yet."}),(0,h.jsx)("p",{className:"text-sm",children:"Add at least one email address to receive the scheduled reports."})]})]});default:return null}}(),O&&(0,h.jsx)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,h.jsx)("p",{className:"text-red-800 text-sm",children:O})})]}),(0,h.jsxs)("div",{className:"flex justify-between p-6 border-t bg-gray-50",children:[(0,h.jsx)(c.z,{onClick:function(){f(function(e){return Math.max(e-1,1)})},variant:"outline",disabled:1===x,children:"Previous"}),(0,h.jsx)("div",{className:"flex space-x-3",children:x<4?(0,h.jsx)(c.z,{onClick:function(){P()&&f(function(e){return Math.min(e+1,4)})},children:"Next"}):(0,h.jsx)(c.z,{onClick:Z,disabled:C,children:C?"Saving...":u?"Update":"Create"})})]})]})})}function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach(function(t){(0,o.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function B(e){var t,r,s,o=e.templates,d=(0,l.useState)([]),u=d[0],m=d[1],x=(0,l.useState)(!0),f=x[0],v=x[1],g=(0,l.useState)(null),b=g[0],j=g[1],y=(0,l.useState)(!1),N=y[0],w=y[1],C=(0,l.useState)(null),k=C[0],S=C[1],O=(0,l.useState)({show:!1,reportId:"",reportName:""}),D=O[0],R=O[1];(0,l.useEffect)(function(){E()},[]);var E=(t=(0,a.Z)(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(!0),j(null),e.next=5,p.getScheduledReports();case 5:m(e.sent),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),j(e.t0 instanceof Error?e.t0.message:"Failed to load scheduled reports");case 12:return e.prev=12,v(!1),e.finish(12);case 15:case"end":return e.stop()}},e,null,[[0,9,12,15]])})),function(){return t.apply(this,arguments)}),P=function(e){var t=u.find(function(t){return t.id===e});R({show:!0,reportId:e,reportName:(null==t?void 0:t.templateName)||"Unknown Report"})},Z=(r=(0,a.Z)(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.deleteScheduledReport(D.reportId);case 3:m(function(e){return e.filter(function(e){return e.id!==D.reportId})}),R({show:!1,reportId:"",reportName:""}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),j(e.t0 instanceof Error?e.t0.message:"Failed to delete scheduled report");case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(){return r.apply(this,arguments)}),A=(s=(0,a.Z)(n().mark(function e(t){var r;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={templateId:t.templateId,parameters:t.parameters,format:t.format,schedule:t.schedule,recipients:t.recipients,isActive:!t.isActive},e.next=4,p.updateScheduledReport(t.id,r);case 4:m(function(e){return e.map(function(e){return e.id===t.id?G(G({},e),{},{isActive:!e.isActive}):e})}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),j(e.t0 instanceof Error?e.t0.message:"Failed to update scheduled report");case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return s.apply(this,arguments)});return f?(0,h.jsx)(i.Zb,{className:"p-8",children:(0,h.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,h.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),(0,h.jsx)("span",{className:"text-gray-600",children:"Loading scheduled reports..."})]})}):(0,h.jsxs)("div",{className:"space-y-6",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Scheduled Reports"}),(0,h.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:"Manage automated report generation and delivery"})]}),(0,h.jsx)(c.z,{onClick:function(){return w(!0)},children:"Create Scheduled Report"})]}),b&&(0,h.jsx)(i.Zb,{className:"p-4 border-red-200 bg-red-50",children:(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)("span",{className:"text-red-500",children:"⚠️"}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-red-800 font-medium",children:"Error"}),(0,h.jsx)("p",{className:"text-red-600 text-sm",children:b}),(0,h.jsx)(c.z,{onClick:E,variant:"outline",size:"sm",className:"mt-2 border-red-300 text-red-700 hover:bg-red-100",children:"Retry"})]})]})}),0===u.length?(0,h.jsx)(i.Zb,{className:"p-8 text-center",children:(0,h.jsxs)("div",{className:"text-gray-500",children:[(0,h.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCC5"}),(0,h.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No Scheduled Reports"}),(0,h.jsx)("p",{className:"text-sm mb-4",children:"Create your first scheduled report to automate report generation and delivery."}),(0,h.jsx)(c.z,{onClick:function(){return w(!0)},children:"Create Scheduled Report"})]})}):(0,h.jsx)("div",{className:"grid grid-cols-1 gap-4",children:u.map(function(e){var t,r;return(0,h.jsx)(i.Zb,{className:"p-6",children:(0,h.jsxs)("div",{className:"flex items-start justify-between",children:[(0,h.jsxs)("div",{className:"flex-1",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,h.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.templateName}),(0,h.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(e.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.isActive?"Active":"Inactive"}),(0,h.jsx)("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:e.format.toUpperCase()})]}),(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"font-medium",children:"Schedule:"}),(0,h.jsx)("span",{className:"ml-2",children:(t=e.schedule,p.describeCronExpression(t))})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"font-medium",children:"Next Run:"}),(0,h.jsx)("span",{className:"ml-2",children:(r=e.nextRun)?new Date(r).toLocaleString():"Not scheduled"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"font-medium",children:"Recipients:"}),(0,h.jsxs)("span",{className:"ml-2",children:[e.recipients.length," recipient(s)"]})]})]}),e.lastRun&&(0,h.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:[(0,h.jsx)("span",{className:"font-medium",children:"Last Run:"}),(0,h.jsx)("span",{className:"ml-2",children:new Date(e.lastRun).toLocaleString()})]}),e.recipients.length>0&&(0,h.jsxs)("div",{className:"mt-2",children:[(0,h.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Recipients:"}),(0,h.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:e.recipients.map(function(e,t){return(0,h.jsx)("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded",children:e},t)})})]})]}),(0,h.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,h.jsx)(c.z,{onClick:function(){return A(e)},variant:"outline",size:"sm",children:e.isActive?"Deactivate":"Activate"}),(0,h.jsx)(c.z,{onClick:function(){return S(e)},variant:"outline",size:"sm",children:"Edit"}),(0,h.jsx)(c.z,{onClick:function(){return P(e.id)},variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:"Delete"})]})]})},e.id)})}),(N||k)&&(0,h.jsx)(T,{templates:o,editingReport:k,onClose:function(){w(!1),S(null)},onSave:function(){w(!1),S(null),E()}}),D.show&&(0,h.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,h.jsx)(i.Zb,{className:"p-6 max-w-md w-full mx-4",children:(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,h.jsx)("span",{className:"text-red-500 text-2xl",children:"⚠️"}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Confirm Deletion"}),(0,h.jsx)("p",{className:"text-sm text-gray-600",children:"This action cannot be undone."})]})]}),(0,h.jsxs)("p",{className:"text-gray-700",children:["Are you sure you want to delete the scheduled report for"," ",(0,h.jsx)("span",{className:"font-medium",children:D.reportName}),"?"]}),(0,h.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,h.jsx)(c.z,{onClick:function(){R({show:!1,reportId:"",reportName:""})},variant:"outline",children:"Cancel"}),(0,h.jsx)(c.z,{onClick:Z,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete Report"})]})]})})})]})}function V(){var e=(0,l.useState)(""),t=e[0],r=e[1],a=(0,l.useState)("all"),s=a[0],n=a[1],o=(0,l.useState)([{id:"1",templateName:"User Activity Report",format:"PDF",generatedAt:"2024-01-15T10:30:00Z",generatedBy:"john.doe@example.com",status:"completed",downloadUrl:"/api/reports/download/1"},{id:"2",templateName:"Data Records Report",format:"Excel",generatedAt:"2024-01-14T15:45:00Z",generatedBy:"jane.smith@example.com",status:"completed",downloadUrl:"/api/reports/download/2"},{id:"3",templateName:"Audit Log Report",format:"CSV",generatedAt:"2024-01-14T09:15:00Z",generatedBy:"admin@example.com",status:"failed",error:"Database connection timeout"},{id:"4",templateName:"User Activity Report",format:"PDF",generatedAt:"2024-01-13T14:20:00Z",generatedBy:"manager@example.com",status:"processing"}])[0].filter(function(e){var r=e.templateName.toLowerCase().includes(t.toLowerCase())||e.generatedBy.toLowerCase().includes(t.toLowerCase()),a="all"===s||e.status===s;return r&&a}),u=function(e){var t="px-2 py-1 text-xs rounded-full font-medium";switch(e){case"completed":return"".concat(t," bg-green-100 text-green-800");case"failed":return"".concat(t," bg-red-100 text-red-800");case"processing":return"".concat(t," bg-yellow-100 text-yellow-800");default:return"".concat(t," bg-gray-100 text-gray-800")}},m=function(e){e.downloadUrl&&window.open(e.downloadUrl,"_blank")};return(0,h.jsxs)("div",{className:"space-y-6",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Report History"}),(0,h.jsx)("p",{className:"text-gray-600 text-sm",children:"View and download previously generated reports"})]}),(0,h.jsx)(i.Zb,{className:"p-4",children:(0,h.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,h.jsx)("div",{className:"flex-1",children:(0,h.jsx)(d.I,{type:"text",placeholder:"Search reports...",value:t,onChange:function(e){return r(e.target.value)},className:"w-full"})}),(0,h.jsx)("div",{className:"sm:w-48",children:(0,h.jsxs)("select",{value:s,onChange:function(e){return n(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,h.jsx)("option",{value:"all",children:"All Status"}),(0,h.jsx)("option",{value:"completed",children:"Completed"}),(0,h.jsx)("option",{value:"processing",children:"Processing"}),(0,h.jsx)("option",{value:"failed",children:"Failed"})]})})]})}),0===o.length?(0,h.jsx)(i.Zb,{className:"p-8 text-center",children:(0,h.jsxs)("div",{className:"text-gray-500",children:[(0,h.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCC4"}),(0,h.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No Reports Found"}),(0,h.jsx)("p",{className:"text-sm",children:t||"all"!==s?"No reports match your current filters.":"No reports have been generated yet."})]})}):(0,h.jsx)("div",{className:"space-y-3",children:o.map(function(e){return(0,h.jsx)(i.Zb,{className:"p-4",children:(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{className:"flex-1",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,h.jsx)("h3",{className:"font-medium text-gray-900",children:e.templateName}),(0,h.jsx)("span",{className:u(e.status),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),(0,h.jsx)("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:e.format})]}),(0,h.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm text-gray-600",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"font-medium",children:"Generated:"}),(0,h.jsx)("span",{className:"ml-2",children:new Date(e.generatedAt).toLocaleString()})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"font-medium",children:"By:"}),(0,h.jsx)("span",{className:"ml-2",children:e.generatedBy})]})]}),e.error&&(0,h.jsxs)("div",{className:"mt-2 text-sm text-red-600",children:[(0,h.jsx)("span",{className:"font-medium",children:"Error:"}),(0,h.jsx)("span",{className:"ml-2",children:e.error})]})]}),(0,h.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:["completed"===e.status&&e.downloadUrl&&(0,h.jsx)(c.z,{onClick:function(){return m(e)},variant:"outline",size:"sm",children:"Download"}),"processing"===e.status&&(0,h.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,h.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-600"}),(0,h.jsx)("span",{children:"Processing..."})]}),"failed"===e.status&&(0,h.jsx)(c.z,{onClick:function(){console.log("Retry report generation for:",e.id)},variant:"outline",size:"sm",className:"text-blue-600 border-blue-300 hover:bg-blue-50",children:"Retry"})]})]})},e.id)})}),o.length>0&&(0,h.jsx)(i.Zb,{className:"p-4",children:(0,h.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,h.jsxs)("span",{children:["Showing ",o.length," reports"]}),(0,h.jsxs)("div",{className:"flex space-x-2",children:[(0,h.jsx)(c.z,{variant:"outline",size:"sm",disabled:!0,children:"Previous"}),(0,h.jsx)(c.z,{variant:"outline",size:"sm",disabled:!0,children:"Next"})]})]})})]})}var _=r(7232);function J(){var e,t=(0,l.useState)("generate"),r=t[0],s=t[1],o=(0,l.useState)([]),d=o[0],u=o[1],m=(0,l.useState)(!0),x=m[0],f=m[1],v=(0,l.useState)(null),g=v[0],b=v[1];(0,l.useEffect)(function(){j()},[]);var j=(e=(0,a.Z)(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),b(null),e.next=5,p.getReportTemplates();case 5:u(e.sent),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),b(e.t0 instanceof Error?e.t0.message:"Failed to load report templates");case 12:return e.prev=12,f(!1),e.finish(12);case 15:case"end":return e.stop()}},e,null,[[0,9,12,15]])})),function(){return e.apply(this,arguments)});return(0,h.jsx)(_.Z,{children:(0,h.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,h.jsxs)("div",{className:"mb-8",children:[(0,h.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Reports"}),(0,h.jsx)("p",{className:"text-gray-600",children:"Generate, schedule, and manage your reports"})]}),(0,h.jsx)("div",{className:"mb-6",children:(0,h.jsx)("nav",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:[{id:"generate",label:"Generate Reports",icon:"\uD83D\uDCCA"},{id:"configure",label:"Configure Reports",icon:"⚙️"},{id:"scheduled",label:"Scheduled Reports",icon:"⏰"},{id:"history",label:"Report History",icon:"\uD83D\uDCCB"}].map(function(e){return(0,h.jsxs)("button",{onClick:function(){return s(e.id)},className:"\n                  flex items-center space-x-2 px-4 py-2 rounded-md text-sm font-medium transition-colors\n                  ".concat(r===e.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50","\n                "),children:[(0,h.jsx)("span",{children:e.icon}),(0,h.jsx)("span",{children:e.label})]},e.id)})})}),g&&(0,h.jsx)(i.Zb,{className:"mb-6 p-4 border-red-200 bg-red-50",children:(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)("span",{className:"text-red-500",children:"⚠️"}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-red-800 font-medium",children:"Error loading reports"}),(0,h.jsx)("p",{className:"text-red-600 text-sm",children:g}),(0,h.jsx)(c.z,{onClick:j,variant:"outline",size:"sm",className:"mt-2 border-red-300 text-red-700 hover:bg-red-100",children:"Try Again"})]})]})}),x&&(0,h.jsx)(i.Zb,{className:"p-8",children:(0,h.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,h.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),(0,h.jsx)("span",{className:"text-gray-600",children:"Loading reports..."})]})}),!x&&!g&&(0,h.jsxs)(h.Fragment,{children:["generate"===r&&(0,h.jsx)(O,{templates:d,onRefresh:j}),"configure"===r&&(0,h.jsx)(z,{templates:d}),"scheduled"===r&&(0,h.jsx)(B,{templates:d}),"history"===r&&(0,h.jsx)(V,{})]})]})})}},55010:function(e,t,r){"use strict";r.d(t,{I:function(){return d}});var a=r(84513),s=r(83366),n=r(39436),l=r(2265),i=r(57437),c=["className","error"];function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}var d=(0,l.forwardRef)(function(e,t){var r=e.className,l=e.error,d=(0,s.Z)(e,c);return(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({className:(0,n.cn)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50",l&&"border-red-500 focus:ring-red-500",r),ref:t},d)),l&&(0,i.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l})]})});d.displayName="Input"},5813:function(e,t,r){"use strict";r.d(t,{hi:function(){return m},x1:function(){return u}});var a=r(84513),s=r(50090),n=r(35685),l=r(10026),i=r(30837),c=r.n(i);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var u=new(function(){var e,t,r,a,i,o;function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http://localhost:3001";(0,n.Z)(this,u),this.baseURL=e}return(0,l.Z)(u,[{key:"request",value:(e=(0,s.Z)(c().mark(function e(t){var r,a,s,n,l,i,o,u=arguments;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},a="".concat(this.baseURL).concat(t),s=d({headers:d({"Content-Type":"application/json"},r.headers)},r),(n=localStorage.getItem("accessToken"))&&(s.headers=d(d({},s.headers),{},{Authorization:"Bearer ".concat(n)})),e.prev=5,e.next=8,fetch(a,s);case 8:return l=e.sent,e.next=11,l.json();case 11:if(i=e.sent,l.ok){e.next=14;break}throw Error((null===(o=i.error)||void 0===o?void 0:o.message)||"API request failed");case 14:return e.abrupt("return",i);case 17:throw e.prev=17,e.t0=e.catch(5),console.error("API request error:",e.t0),e.t0;case 21:case"end":return e.stop()}},e,this,[[5,17]])})),function(t){return e.apply(this,arguments)})},{key:"get",value:(t=(0,s.Z)(c().mark(function e(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.request(t,{method:"GET"}));case 1:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"post",value:(r=(0,s.Z)(c().mark(function e(t,r){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.request(t,{method:"POST",body:r?JSON.stringify(r):void 0}));case 1:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"put",value:(a=(0,s.Z)(c().mark(function e(t,r){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.request(t,{method:"PUT",body:r?JSON.stringify(r):void 0}));case 1:case"end":return e.stop()}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"patch",value:(i=(0,s.Z)(c().mark(function e(t,r){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.request(t,{method:"PATCH",body:r?JSON.stringify(r):void 0}));case 1:case"end":return e.stop()}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"delete",value:(o=(0,s.Z)(c().mark(function e(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.request(t,{method:"DELETE"}));case 1:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})}]),u}()),m=u}},function(e){e.O(0,[816,738,873,880,92,669,232,793,971,529,744],function(){return e(e.s=95730)}),_N_E=e.O()}]);