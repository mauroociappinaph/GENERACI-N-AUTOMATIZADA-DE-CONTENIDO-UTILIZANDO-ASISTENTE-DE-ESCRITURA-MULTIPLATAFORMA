(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{66973:function(e,r,t){Promise.resolve().then(t.bind(t,6846))},32921:function(e,r,t){"use strict";var n=t(26168);t.o(n,"useParams")&&t.d(r,{useParams:function(){return n.useParams}}),t.o(n,"usePathname")&&t.d(r,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}})},58352:function(e,r,t){"use strict";var n=t(2265),i="function"==typeof Object.is?Object.is:function(e,r){return e===r&&(0!==e||1/e==1/r)||e!=e&&r!=r},o=n.useState,u=n.useEffect,s=n.useLayoutEffect,a=n.useDebugValue;function c(e){var r=e.getSnapshot;e=e.value;try{var t=r();return!i(e,t)}catch(e){return!0}}var f=void 0===window.document||void 0===window.document.createElement?function(e,r){return r()}:function(e,r){var t=r(),n=o({inst:{value:t,getSnapshot:r}}),i=n[0].inst,f=n[1];return s(function(){i.value=t,i.getSnapshot=r,c(i)&&f({inst:i})},[e,t,r]),u(function(){return c(i)&&f({inst:i}),e(function(){c(i)&&f({inst:i})})},[e]),a(t),t};r.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:f},14351:function(e,r,t){"use strict";var n=t(2265),i=t(48797),o="function"==typeof Object.is?Object.is:function(e,r){return e===r&&(0!==e||1/e==1/r)||e!=e&&r!=r},u=i.useSyncExternalStore,s=n.useRef,a=n.useEffect,c=n.useMemo,f=n.useDebugValue;r.useSyncExternalStoreWithSelector=function(e,r,t,n,i){var d=s(null);if(null===d.current){var l={hasValue:!1,value:null};d.current=l}else l=d.current;var p=u(e,(d=c(function(){function e(e){if(!a){if(a=!0,u=e,e=n(e),void 0!==i&&l.hasValue){var r=l.value;if(i(r,e))return s=r}return s=e}if(r=s,o(u,e))return r;var t=n(e);return void 0!==i&&i(r,t)?(u=e,r):(u=e,s=t)}var u,s,a=!1,c=void 0===t?null:t;return[function(){return e(r())},null===c?void 0:function(){return e(c())}]},[r,t,n,i]))[0],d[1]);return a(function(){l.hasValue=!0,l.value=p},[p]),f(p),p}},48797:function(e,r,t){"use strict";e.exports=t(58352)},3029:function(e,r,t){"use strict";e.exports=t(14351)},6846:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return c}});var n=t(2265),i=t(32921),o=t(52133),u=t(30229),s=t(69161),a=t(57437);function c(){var e=(0,o.t)(),r=e.user,t=e.isAuthenticated,c=(0,i.useRouter)();return(0,n.useEffect)(function(){if(t&&r){var e=(0,u.wP)(r.role);c.push(e)}else c.push("/login")},[t,r,c]),(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)(s.g,{size:"lg"})})}},69161:function(e,r,t){"use strict";t.d(r,{g:function(){return o}});var n=t(39436),i=t(57437);function o(e){var r=e.size,t=e.className;return(0,i.jsx)("div",{className:"flex justify-center items-center",children:(0,i.jsx)("div",{className:(0,n.cn)("animate-spin rounded-full border-t-transparent border-blue-600",{sm:"h-4 w-4 border-2",md:"h-6 w-6 border-2",lg:"h-8 w-8 border-3"}[void 0===r?"md":r],t)})})}},30229:function(e,r,t){"use strict";t.d(r,{EH:function(){return a},Hc:function(){return s},c1:function(){return c},wP:function(){return f}});var n=t(84513),i=t(93394);function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function u(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var s=[{name:"Dashboard",href:"/dashboard",icon:"dashboard",description:"Vista general del sistema"},{name:"Registros",href:"/records",icon:"database",description:"Gesti\xf3n de datos y registros",roles:[i.i4.ADMIN,i.i4.MANAGER,i.i4.USER],children:[{name:"Todos los registros",href:"/records",description:"Ver todos los registros"},{name:"Crear registro",href:"/records/new",description:"Crear un nuevo registro",roles:[i.i4.ADMIN,i.i4.MANAGER,i.i4.USER]},{name:"B\xfasqueda avanzada",href:"/records/search",description:"B\xfasqueda avanzada de registros"}]},{name:"Reportes",href:"/reports",icon:"chart",description:"Generaci\xf3n y visualizaci\xf3n de reportes",roles:[i.i4.ADMIN,i.i4.MANAGER],children:[{name:"Reportes disponibles",href:"/reports",description:"Ver reportes disponibles"},{name:"Crear reporte",href:"/reports/create",description:"Crear un nuevo reporte",roles:[i.i4.ADMIN,i.i4.MANAGER]},{name:"Reportes programados",href:"/reports/scheduled",description:"Ver reportes programados",roles:[i.i4.ADMIN,i.i4.MANAGER]}]},{name:"Administraci\xf3n",href:"/admin",icon:"settings",description:"Configuraci\xf3n y administraci\xf3n del sistema",roles:[i.i4.ADMIN],children:[{name:"Usuarios",href:"/admin/users",description:"Gesti\xf3n de usuarios"},{name:"Configuraci\xf3n",href:"/admin/settings",description:"Configuraci\xf3n del sistema"},{name:"Auditor\xeda",href:"/admin/audit",description:"Logs de auditor\xeda"}]}];function a(e,r){return r?e.filter(function(e){return!e.roles||e.roles.includes(r)}).map(function(e){return e.children?u(u({},e),{},{children:e.children.filter(function(e){return!e.roles||e.roles.includes(r)})}):e}):e.filter(function(e){return!e.roles})}function c(e,r){if(!r)return!1;if(r===i.i4.ADMIN)return!0;var t="/"+e.split("/")[1];if(!((o={},(0,n.Z)(o,i.i4.ADMIN,["/admin","/reports","/records","/dashboard"]),(0,n.Z)(o,i.i4.MANAGER,["/reports","/records","/dashboard"]),(0,n.Z)(o,i.i4.USER,["/records","/dashboard"]),(0,n.Z)(o,i.i4.VIEWER,["/dashboard"]),o)[r]||[]).includes(t))return!1;if(e!==t){var o,u,a=e.split("/").slice(0,3).join("/"),c=s.find(function(e){return e.href===t}),f=null==c||null===(u=c.children)||void 0===u?void 0:u.find(function(e){return e.href===a});if(f&&f.roles&&!f.roles.includes(r))return!1}return!0}function f(e){var r;return e?(r={},(0,n.Z)(r,i.i4.ADMIN,"/dashboard"),(0,n.Z)(r,i.i4.MANAGER,"/dashboard"),(0,n.Z)(r,i.i4.USER,"/dashboard"),(0,n.Z)(r,i.i4.VIEWER,"/dashboard"),r)[e]||"/dashboard":"/login"}},39436:function(e,r,t){"use strict";t.d(r,{cn:function(){return o}});var n=t(20487),i=t(63932);function o(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,i.m6)((0,n.W)(r))}},52133:function(e,r,t){"use strict";t.d(r,{t:function(){return u}});var n=t(84513);function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function o(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var u=(0,t(71703).Ue)()(function(e){return{user:null,token:null,isAuthenticated:!1,isLoading:!1,isInitialized:!1,login:function(r,t){return e({token:r,user:t,isAuthenticated:!0,isLoading:!1,isInitialized:!0})},logout:function(){return e({token:null,user:null,isAuthenticated:!1,isInitialized:!0})},setLoading:function(r){return e({isLoading:r})},updateUser:function(r){return e(function(e){return{user:e.user?o(o({},e.user),r):null}})},initialize:function(r,t,n){return e({user:r,token:t,isAuthenticated:n,isInitialized:!0})}}})},93394:function(e,r,t){"use strict";t.d(r,{i4:function(){return o},k$:function(){return u}});var n,i,o=((n={}).ADMIN="ADMIN",n.MANAGER="MANAGER",n.USER="USER",n.VIEWER="VIEWER",n),u=((i={}).INFO="info",i.SUCCESS="success",i.WARNING="warning",i.ERROR="error",i.SYSTEM="system",i.USER_ACTION="user_action",i.DATA_UPDATE="data_update",i.REPORT_READY="report_ready",i)},71703:function(e,r,t){"use strict";t.d(r,{Ue:function(){return d}});var n=function(e){var r,t=new Set,n=function(e,n){var i="function"==typeof e?e(r):e;if(!Object.is(i,r)){var o=r;r=(null!=n?n:"object"!=typeof i||null===i)?i:Object.assign({},r,i),t.forEach(function(e){return e(r,o)})}},i=function(){return r},o={setState:n,getState:i,getInitialState:function(){return u},subscribe:function(e){return t.add(e),function(){return t.delete(e)}},destroy:function(){console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},u=r=e(n,i,o);return o},i=t(2265),o=t(3029),u=i.useDebugValue,s=o.useSyncExternalStoreWithSelector,a=!1,c=function(e){return e},f=function(e){"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");var r="function"==typeof e?e?n(e):n:e,t=function(e,t){return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c,t=arguments.length>2?arguments[2]:void 0;t&&!a&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),a=!0);var n=s(e.subscribe,e.getState,e.getServerState||e.getInitialState,r,t);return u(n),n}(r,e,t)};return Object.assign(t,r),t},d=function(e){return e?f(e):f}}},function(e){e.O(0,[816,971,529,744],function(){return e(e.s=66973)}),_N_E=e.O()}]);