(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[47],{15237:function(e,r,t){Promise.resolve().then(t.bind(t,3146))},3146:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return j}});var s=t(50090),a=t(30837),n=t.n(a),i=t(2265),c=t(32921),l=t(43998),d=t(19245),o=t(57437);function x(e){var r,t=e.record,s=e.onBackToList,a=e.onEdit,n=e.onDelete;return(0,o.jsxs)("div",{className:"flex justify-between items-start",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Ver Registro"}),(0,o.jsx)("p",{className:"text-gray-600 mt-1",children:"Informaci\xf3n detallada del registro de datos"}),t&&(0,o.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["ID: ",t.id," | Tipo: ",t.type," | Versi\xf3n:"," ",(null===(r=t.metadata)||void 0===r?void 0:r.version)||1]})]}),(0,o.jsxs)("div",{className:"flex space-x-2",children:[(0,o.jsx)(d.z,{variant:"outline",onClick:s,children:"Volver a Lista"}),(0,o.jsx)(d.z,{variant:"outline",onClick:a,children:"Editar"}),(0,o.jsx)(d.z,{variant:"destructive",onClick:n,children:"Eliminar"})]})]})}var u=t(50071),m=t(91734),h=t(77254),f=t(83740),p=t(19163),g=t(83915);function j(e){var r,t,a,d,j,v,y,b,N,w,k,E,H,S,L,C,B,O,Z,D,T,z,R,V,_,A,Y=(r=e.params.id,t=(0,c.useRouter)(),d=(a=(0,i.useState)(null))[0],j=a[1],y=(v=(0,i.useState)([]))[0],b=v[1],w=(N=(0,i.useState)(!0))[0],k=N[1],H=(E=(0,i.useState)(!1))[0],S=E[1],C=(L=(0,i.useState)(null))[0],B=L[1],Z=(O=(0,i.useState)(!1))[0],D=O[1],T=(0,s.Z)(n().mark(function e(){var t,s;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(!0),B(null),e.next=5,l.c.getRecord(r);case 5:(t=e.sent).success&&t.data?j(t.data):B((null===(s=t.error)||void 0===s?void 0:s.message)||"Error al cargar el registro"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),B("Error de conexi\xf3n al cargar el registro"),e.t0 instanceof Error&&B("Error de conexi\xf3n: ".concat(e.t0.message));case 13:return e.prev=13,k(!1),e.finish(13);case 16:case"end":return e.stop()}},e,null,[[0,9,13,16]])})),z=function(){return T.apply(this,arguments)},R=(0,s.Z)(n().mark(function e(){var t;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(!0),e.next=4,l.c.getRecordHistory(r);case 4:(t=e.sent).success&&t.data&&b(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0 instanceof Error&&B("Error loading history: ".concat(e.t0.message));case 11:return e.prev=11,S(!1),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[0,8,11,14]])})),V=function(){return R.apply(this,arguments)},_=(0,s.Z)(n().mark(function e(){var s,a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("\xbfEst\xe1 seguro de que desea eliminar este registro?")){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,l.c.deleteRecord(r);case 6:(s=e.sent).success?t.push("/data"):window.alert((null===(a=s.error)||void 0===a?void 0:a.message)||"Error al eliminar el registro"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),window.alert("Error de conexi\xf3n al eliminar el registro"),e.t0 instanceof Error&&window.alert("Error: ".concat(e.t0.message));case 14:case"end":return e.stop()}},e,null,[[3,10]])})),A=function(){return _.apply(this,arguments)},(0,i.useEffect)(function(){r&&z()},[r]),{record:d,history:y,isLoading:w,isLoadingHistory:H,error:C,showHistory:Z,handleShowHistory:function(){Z||0!==y.length||V(),D(!Z)},handleEdit:function(){t.push("/data/".concat(r,"/edit"))},handleDelete:A,handleBackToList:function(){t.push("/data")}}),I=Y.record,q=Y.history,P=Y.isLoading,Q=Y.isLoadingHistory,G=Y.error,J=Y.showHistory,M=Y.handleShowHistory,F=Y.handleEdit,K=Y.handleDelete,U=Y.handleBackToList;return P?(0,o.jsx)(p.p,{}):G?(0,o.jsx)(g.d,{error:G}):I?(0,o.jsxs)("div",{className:"container mx-auto py-6 space-y-6",children:[(0,o.jsx)(x,{record:I,onBackToList:U,onEdit:F,onDelete:K}),(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,o.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,o.jsx)(u.e,{record:I}),(0,o.jsx)(m.r,{record:I})]}),(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsx)(h.o,{record:I}),(0,o.jsx)(f.B,{history:q,showHistory:J,isLoadingHistory:Q,onToggleHistory:M})]})]})]}):(0,o.jsx)(g.d,{error:"Registro no encontrado"})}},91734:function(e,r,t){"use strict";t.d(r,{r:function(){return i}});var s=t(66859),a=t(36118),n=t(57437);function i(e){var r=e.record;return(0,n.jsxs)(a.Zb,{children:[(0,n.jsx)(a.Ol,{children:(0,n.jsx)(a.ll,{children:"Datos del Registro"})}),(0,n.jsx)(a.aY,{children:(0,n.jsx)("div",{className:"space-y-4",children:Object.entries(r.data).map(function(e){var r=(0,s.Z)(e,2),t=r[0],a=r[1];return(0,n.jsxs)("div",{className:"border-b border-gray-200 pb-4 last:border-b-0",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,n.jsx)("div",{className:"bg-gray-50 p-3 rounded-md",children:(0,n.jsx)("pre",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:"object"==typeof a&&null!==a?JSON.stringify(a,null,2):String(a)})})]},t)})})})]})}},83915:function(e,r,t){"use strict";t.d(r,{d:function(){return n}});var s=t(36118),a=t(57437);function n(e){var r=e.error;return(0,a.jsxs)("div",{className:"container mx-auto py-6 space-y-6",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Error"})}),(0,a.jsx)(s.Zb,{children:(0,a.jsx)(s.aY,{className:"pt-6",children:(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:r})})})]})}},50071:function(e,r,t){"use strict";t.d(r,{e:function(){return n}});var s=t(36118),a=t(57437);function n(e){var r,t,n,i,c,l=e.record;return(0,a.jsxs)(s.Zb,{children:[(0,a.jsx)(s.Ol,{children:(0,a.jsx)(s.ll,{children:"Informaci\xf3n General"})}),(0,a.jsxs)(s.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:l.type})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Categor\xeda"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:(null===(r=l.metadata)||void 0===r?void 0:r.category)||"Sin categor\xeda"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Prioridad"}),(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(function(e){switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}(null===(t=l.metadata)||void 0===t?void 0:t.priority)),children:(null===(n=l.metadata)||void 0===n?void 0:n.priority)||"normal"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Versi\xf3n"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:(null===(i=l.metadata)||void 0===i?void 0:i.version)||1})]})]}),(null===(c=l.metadata)||void 0===c?void 0:c.tags)&&l.metadata.tags.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Etiquetas"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:l.metadata.tags.map(function(e,r){return(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:e},r)})})]})]})]})}},19163:function(e,r,t){"use strict";t.d(r,{p:function(){return a}});var s=t(57437);function a(){return(0,s.jsx)("div",{className:"container mx-auto py-6",children:(0,s.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,s.jsx)("span",{className:"ml-2 text-gray-600",children:"Cargando registro..."})]})})}},77254:function(e,r,t){"use strict";t.d(r,{o:function(){return l}});var s=t(36118),a=t(29368),n=t(32090),i=t(57437);function c(e){try{return(0,a.Q)(new Date(e),{addSuffix:!0,locale:n.es})}catch(r){return e}}function l(e){var r=e.record;return(0,i.jsxs)(s.Zb,{children:[(0,i.jsx)(s.Ol,{children:(0,i.jsx)(s.ll,{children:"Metadatos"})}),(0,i.jsxs)(s.aY,{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Creado"}),(0,i.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:c(r.createdAt)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Actualizado"}),(0,i.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:c(r.updatedAt)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Creado por"}),(0,i.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:r.createdBy})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Actualizado por"}),(0,i.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:r.updatedBy})]})]})]})}},83740:function(e,r,t){"use strict";t.d(r,{B:function(){return l}});var s=t(36118),a=t(19245),n=t(29368),i=t(32090),c=t(57437);function l(e){var r=e.history,t=e.showHistory,l=e.isLoadingHistory,d=e.onToggleHistory;return(0,c.jsxs)(s.Zb,{children:[(0,c.jsx)(s.Ol,{children:(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[(0,c.jsx)(s.ll,{children:"Historial"}),(0,c.jsxs)(a.z,{variant:"outline",size:"sm",onClick:d,isLoading:l,children:[t?"Ocultar":"Ver"," Historial"]})]})}),t&&(0,c.jsx)(s.aY,{children:r.length>0?(0,c.jsx)("div",{className:"space-y-3",children:r.map(function(e,r){var t;return(0,c.jsxs)("div",{className:"border-l-2 border-blue-200 pl-4",children:[(0,c.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["Versi\xf3n ",(null===(t=e.metadata)||void 0===t?void 0:t.version)||r+1]}),(0,c.jsx)("div",{className:"text-xs text-gray-500",children:function(e){try{return(0,n.Q)(new Date(e),{addSuffix:!0,locale:i.es})}catch(r){return e}}(e.updatedAt)}),(0,c.jsxs)("div",{className:"text-xs text-gray-500",children:["por ",e.updatedBy]})]},r)})}):(0,c.jsx)("p",{className:"text-sm text-gray-500",children:"No hay historial disponible"})})]})}}},function(e){e.O(0,[816,873,544,971,529,744],function(){return e(e.s=15237)}),_N_E=e.O()}]);