(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[534],{6430:function(e,r,t){Promise.resolve().then(t.bind(t,8424))},8424:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return O}});var n=t(50090),s=t(30837),i=t.n(s),a=t(2265),c=t(32921),l=t(43998),o=t(17099),d=t(50071),u=t(91734),x=t(77254),m=t(83740),h=t(19163),f=t(83915),v=t(19245),p=t(12693),j=t(56642),g=t(35179),y=(0,g.Z)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),b=(0,g.Z)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),N=(0,g.Z)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),w=t(21594),k=t(57437);function O(){var e,r=(0,c.useRouter)(),t=(0,c.useParams)().id,s=(0,a.useState)(null),g=s[0],O=s[1],E=(0,a.useState)(!0),C=E[0],Z=E[1],P=(0,a.useState)(null),z=P[0],S=P[1],A=(0,a.useState)(!1),D=A[0],R=A[1],H=(0,a.useState)(!1),M=H[0],L=H[1];(0,a.useEffect)(function(){var e,r=(e=(0,n.Z)(i().mark(function e(){var r,n;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Z(!0),S(null),e.next=5,l.c.getRecordById(t);case 5:(r=e.sent).success&&r.data?O(r.data):S((null===(n=r.error)||void 0===n?void 0:n.message)||"Error al cargar el registro"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),S("Error de conexi\xf3n al cargar el registro"),e.t0 instanceof Error&&S("Error de conexi\xf3n: ".concat(e.t0.message));case 13:return e.prev=13,Z(!1),e.finish(13);case 16:case"end":return e.stop()}},e,null,[[0,9,13,16]])})),function(){return e.apply(this,arguments)});t&&r()},[t]);var V=(e=(0,n.Z)(i().mark(function e(){var t,n;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,l.c.deleteRecord(g.id);case 5:(t=e.sent).success?((0,p.A)({title:"Registro eliminado",description:"El registro fue eliminado correctamente."}),r.push("/records")):(0,p.A)({title:"Error al eliminar",description:(null===(n=t.error)||void 0===n?void 0:n.message)||"Error desconocido.",variant:"destructive"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),(0,p.A)({title:"Error de conexi\xf3n",description:e.t0 instanceof Error?e.t0.message:"Error desconocido.",variant:"destructive"});case 12:return e.prev=12,R(!1),e.finish(12);case 15:case"end":return e.stop()}},e,null,[[2,9,12,15]])})),function(){return e.apply(this,arguments)});return C?(0,k.jsx)(h.p,{}):z?(0,k.jsx)(f.d,{error:z,onRetry:function(){return window.location.reload()}}):g?(0,k.jsxs)("div",{className:"container mx-auto py-6 space-y-6",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center gap-4",children:[(0,k.jsxs)(v.z,{variant:"outline",size:"sm",onClick:function(){return r.back()},className:"flex items-center gap-2",children:[(0,k.jsx)(j.Z,{className:"h-4 w-4"}),"Volver"]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Detalle del Registro"}),(0,k.jsxs)("p",{className:"text-gray-600 mt-1",children:["ID: ",g.id]})]})]}),(0,k.jsxs)("div",{className:"flex gap-2",children:[(0,k.jsxs)(v.z,{variant:"outline",onClick:function(){return L(!0)},className:"flex items-center gap-2",children:[(0,k.jsx)(y,{className:"h-4 w-4"}),"Historial"]}),(0,k.jsxs)(v.z,{variant:"outline",onClick:function(){r.push("/records/".concat(t,"/edit"))},className:"flex items-center gap-2",children:[(0,k.jsx)(b,{className:"h-4 w-4"}),"Editar"]}),(0,k.jsxs)(v.z,{variant:"destructive",onClick:function(){return R(!0)},className:"flex items-center gap-2",children:[(0,k.jsx)(N,{className:"h-4 w-4"}),"Eliminar"]})]})]}),(0,k.jsx)(o.b,{record:g}),(0,k.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,k.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,k.jsx)(d.e,{record:g}),(0,k.jsx)(u.r,{record:g})]}),(0,k.jsx)("div",{className:"space-y-6",children:(0,k.jsx)(x.o,{record:g})})]}),M&&(0,k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,k.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[80vh] overflow-hidden",children:[(0,k.jsx)("div",{className:"p-6 border-b",children:(0,k.jsxs)("div",{className:"flexstify-betenter",children:[(0,k.jsx)("h2",{className:"text-xl font-semibold",children:"Historial de Versiones"}),(0,k.jsx)(v.z,{variant:"outline",onClick:function(){return L(!1)},children:"Cerrar"})]})}),(0,k.jsx)("div",{className:"p-6 overflow-y-auto",children:(0,k.jsx)(m.B,{recordId:g.id})})]})}),(0,k.jsx)(w.aR,{open:D,onOpenChange:R,children:(0,k.jsxs)(w._T,{children:[(0,k.jsxs)(w.fY,{children:[(0,k.jsx)(w.f$,{children:"\xbfEliminar registro?"}),(0,k.jsxs)(w.yT,{children:["Esta acci\xf3n no se puede deshacer. El registro"," ",(0,k.jsx)("span",{className:"font-semibold",children:g.id})," ser\xe1 eliminado permanentemente."]})]}),(0,k.jsxs)(w.xo,{children:[(0,k.jsx)(v.z,{variant:"outline",onClick:function(){return R(!1)},children:"Cancelar"}),(0,k.jsx)(v.z,{variant:"destructive",onClick:V,children:"Eliminar"})]})]})})]}):(0,k.jsx)(f.d,{error:"Registro no encontrado",onRetry:function(){return r.push("/records")}})}},91734:function(e,r,t){"use strict";t.d(r,{r:function(){return a}});var n=t(66859),s=t(36118),i=t(57437);function a(e){var r=e.record;return(0,i.jsxs)(s.Zb,{children:[(0,i.jsx)(s.Ol,{children:(0,i.jsx)(s.ll,{children:"Datos del Registro"})}),(0,i.jsx)(s.aY,{children:(0,i.jsx)("div",{className:"space-y-4",children:Object.entries(r.data).map(function(e){var r=(0,n.Z)(e,2),t=r[0],s=r[1];return(0,i.jsxs)("div",{className:"border-b border-gray-200 pb-4 last:border-b-0",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,i.jsx)("div",{className:"bg-gray-50 p-3 rounded-md",children:(0,i.jsx)("pre",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:"object"==typeof s&&null!==s?JSON.stringify(s,null,2):String(s)})})]},t)})})})]})}},83915:function(e,r,t){"use strict";t.d(r,{d:function(){return i}});var n=t(36118),s=t(57437);function i(e){var r=e.error;return(0,s.jsxs)("div",{className:"container mx-auto py-6 space-y-6",children:[(0,s.jsx)("div",{children:(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Error"})}),(0,s.jsx)(n.Zb,{children:(0,s.jsx)(n.aY,{className:"pt-6",children:(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:r})})})]})}},50071:function(e,r,t){"use strict";t.d(r,{e:function(){return i}});var n=t(36118),s=t(57437);function i(e){var r,t,i,a,c,l=e.record;return(0,s.jsxs)(n.Zb,{children:[(0,s.jsx)(n.Ol,{children:(0,s.jsx)(n.ll,{children:"Informaci\xf3n General"})}),(0,s.jsxs)(n.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:l.type})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Categor\xeda"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:(null===(r=l.metadata)||void 0===r?void 0:r.category)||"Sin categor\xeda"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Prioridad"}),(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(function(e){switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}(null===(t=l.metadata)||void 0===t?void 0:t.priority)),children:(null===(i=l.metadata)||void 0===i?void 0:i.priority)||"normal"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Versi\xf3n"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:(null===(a=l.metadata)||void 0===a?void 0:a.version)||1})]})]}),(null===(c=l.metadata)||void 0===c?void 0:c.tags)&&l.metadata.tags.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Etiquetas"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:l.metadata.tags.map(function(e,r){return(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:e},r)})})]})]})]})}},17099:function(e,r,t){"use strict";t.d(r,{b:function(){return i}});var n=t(19245),s=t(57437);function i(e){var r,t=e.record,i=e.onShowHistory,a=e.isLoadingHistory;return(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Editar Registro"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Modifique la informaci\xf3n del registro de datos"}),t&&(0,s.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["ID: ",t.id," | Tipo: ",t.type," | Versi\xf3n:"," ",(null===(r=t.metadata)||void 0===r?void 0:r.version)||1]})]}),(0,s.jsx)("div",{className:"flex space-x-2",children:(0,s.jsx)(n.z,{variant:"outline",onClick:i,disabled:a,children:"Ver Historial"})})]})}},19163:function(e,r,t){"use strict";t.d(r,{p:function(){return s}});var n=t(57437);function s(){return(0,n.jsx)("div",{className:"container mx-auto py-6",children:(0,n.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,n.jsx)("span",{className:"ml-2 text-gray-600",children:"Cargando registro..."})]})})}},77254:function(e,r,t){"use strict";t.d(r,{o:function(){return l}});var n=t(36118),s=t(29368),i=t(32090),a=t(57437);function c(e){try{return(0,s.Q)(new Date(e),{addSuffix:!0,locale:i.es})}catch(r){return e}}function l(e){var r=e.record;return(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsx)(n.ll,{children:"Metadatos"})}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Creado"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:c(r.createdAt)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Actualizado"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:c(r.updatedAt)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Creado por"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:r.createdBy})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Actualizado por"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:r.updatedBy})]})]})]})}},83740:function(e,r,t){"use strict";t.d(r,{B:function(){return l}});var n=t(36118),s=t(19245),i=t(29368),a=t(32090),c=t(57437);function l(e){var r=e.history,t=e.showHistory,l=e.isLoadingHistory,o=e.onToggleHistory;return(0,c.jsxs)(n.Zb,{children:[(0,c.jsx)(n.Ol,{children:(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[(0,c.jsx)(n.ll,{children:"Historial"}),(0,c.jsxs)(s.z,{variant:"outline",size:"sm",onClick:o,isLoading:l,children:[t?"Ocultar":"Ver"," Historial"]})]})}),t&&(0,c.jsx)(n.aY,{children:r.length>0?(0,c.jsx)("div",{className:"space-y-3",children:r.map(function(e,r){var t;return(0,c.jsxs)("div",{className:"border-l-2 border-blue-200 pl-4",children:[(0,c.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["Versi\xf3n ",(null===(t=e.metadata)||void 0===t?void 0:t.version)||r+1]}),(0,c.jsx)("div",{className:"text-xs text-gray-500",children:function(e){try{return(0,i.Q)(new Date(e),{addSuffix:!0,locale:a.es})}catch(r){return e}}(e.updatedAt)}),(0,c.jsxs)("div",{className:"text-xs text-gray-500",children:["por ",e.updatedBy]})]},r)})}):(0,c.jsx)("p",{className:"text-sm text-gray-500",children:"No hay historial disponible"})})]})}},21594:function(e,r,t){"use strict";t.d(r,{OL:function(){return u},_T:function(){return a},aR:function(){return i},f$:function(){return l},fY:function(){return c},le:function(){return x},xo:function(){return d},yT:function(){return o}});var n=t(19245),s=t(57437);function i(e){var r=e.open,t=e.onOpenChange,n=e.children;return r?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50",onClick:function(){return t(!1)}}),(0,s.jsx)("div",{className:"relative bg-white rounded-lg shadow-lg max-w-md w-full mx-4",children:n})]}):null}function a(e){var r=e.children;return(0,s.jsx)("div",{className:"p-6",children:r})}function c(e){var r=e.children;return(0,s.jsx)("div",{className:"mb-4",children:r})}function l(e){var r=e.children;return(0,s.jsx)("h2",{className:"text-lg font-semibold",children:r})}function o(e){var r=e.children;return(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:r})}function d(e){var r=e.children;return(0,s.jsx)("div",{className:"flex justify-end space-x-2 mt-6",children:r})}function u(e){var r=e.onClick,t=e.children,i=e.variant;return(0,s.jsx)(n.z,{onClick:r,variant:"destructive"===(void 0===i?"default":i)?"danger":"primary",children:t})}function x(e){var r=e.onClick,t=e.children;return(0,s.jsx)(n.z,{onClick:r,variant:"outline",children:t})}},12693:function(e,r,t){"use strict";t.d(r,{A:function(){return i},p:function(){return s}});var n=t(29738),s=function(){return{toast:function(e){"destructive"===e.variant?n.ZP.error(e.description||e.title||"Error"):n.ZP.success(e.description||e.title||"Success")}}},i=function(e){"destructive"===e.variant?n.ZP.error(e.description||e.title||"Error"):n.ZP.success(e.description||e.title||"Success")}},35179:function(e,r,t){"use strict";t.d(r,{Z:function(){return j}});var n=t(84513),s=t(83366),i=t(2265),a=function(e){var r=e.replace(/^([A-Z])|[\s-_]+(\w)/g,function(e,r,t){return t?t.toUpperCase():r.toLowerCase()});return r.charAt(0).toUpperCase()+r.slice(1)},c=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter(function(e,r,t){return!!e&&""!==e.trim()&&t.indexOf(e)===r}).join(" ").trim()},l=function(e){for(var r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0},o=t(66859),d=t(86583),u={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},x=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"];function m(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function h(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?m(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var f=(0,i.forwardRef)(function(e,r){var t=e.color,n=e.size,a=void 0===n?24:n,m=e.strokeWidth,f=void 0===m?2:m,v=e.absoluteStrokeWidth,p=e.className,j=e.children,g=e.iconNode,y=(0,s.Z)(e,x);return(0,i.createElement)("svg",h(h(h({ref:r},u),{},{width:a,height:a,stroke:void 0===t?"currentColor":t,strokeWidth:v?24*Number(f)/Number(a):f,className:c("lucide",void 0===p?"":p)},!j&&!l(y)&&{"aria-hidden":"true"}),y),[].concat((0,d.Z)(g.map(function(e){var r=(0,o.Z)(e,2),t=r[0],n=r[1];return(0,i.createElement)(t,n)})),(0,d.Z)(Array.isArray(j)?j:[j])))}),v=["className"];function p(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}var j=function(e,r){var t=(0,i.forwardRef)(function(t,l){var o=t.className,d=(0,s.Z)(t,v);return(0,i.createElement)(f,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?p(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({ref:l,iconNode:r,className:c("lucide-".concat(a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o)},d))});return t.displayName=a(e),t}},56642:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});var n=(0,t(35179).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])}},function(e){e.O(0,[816,738,873,544,971,529,744],function(){return e(e.s=6430)}),_N_E=e.O()}]);