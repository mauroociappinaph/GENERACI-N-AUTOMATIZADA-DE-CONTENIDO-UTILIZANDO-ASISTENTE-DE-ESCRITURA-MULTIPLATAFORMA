"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[930],{93033:function(e,r,t){t.d(r,{W:function(){return p}});var a=t(84513),n=t(86583),s=t(2265),i=t(19245),c=t(36118),l=t(29368),o=t(32090),d=t(57437);function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,a)}return t}function m(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?u(Object(t),!0).forEach(function(r){(0,a.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function p(e){var r=e.currentRecord,t=e.conflictingRecord,a=e.onResolve,u=e.onCancel,p=(0,s.useState)(function(){var e,a,s,i,c,l,o,d,u,m,p,x,h=[];return new Set([].concat((0,n.Z)(Object.keys(r.data)),(0,n.Z)(Object.keys(t.data)))).forEach(function(e){var a=r.data[e],n=t.data[e];JSON.stringify(a)!==JSON.stringify(n)&&h.push({field:e,currentValue:a,incomingValue:n,resolution:"current"})}),(null===(e=r.metadata)||void 0===e?void 0:e.category)!==(null===(a=t.metadata)||void 0===a?void 0:a.category)&&h.push({field:"metadata.category",currentValue:null===(o=r.metadata)||void 0===o?void 0:o.category,incomingValue:null===(d=t.metadata)||void 0===d?void 0:d.category,resolution:"current"}),(null===(s=r.metadata)||void 0===s?void 0:s.priority)!==(null===(i=t.metadata)||void 0===i?void 0:i.priority)&&h.push({field:"metadata.priority",currentValue:null===(u=r.metadata)||void 0===u?void 0:u.priority,incomingValue:null===(m=t.metadata)||void 0===m?void 0:m.priority,resolution:"current"}),((null===(c=r.metadata)||void 0===c||null===(c=c.tags)||void 0===c?void 0:c.sort().join(","))||"")!==((null===(l=t.metadata)||void 0===l||null===(l=l.tags)||void 0===l?void 0:l.sort().join(","))||"")&&h.push({field:"metadata.tags",currentValue:null===(p=r.metadata)||void 0===p?void 0:p.tags,incomingValue:null===(x=t.metadata)||void 0===x?void 0:x.tags,resolution:"current"}),h}),x=p[0],h=p[1],g=function(e){try{return(0,l.Q)(new Date(e),{addSuffix:!0,locale:o.es})}catch(r){return e}},b=function(e){return null==e?"Sin valor":Array.isArray(e)?e.join(", "):"object"==typeof e?JSON.stringify(e,null,2):String(e)},f=function(e,r,t){h(function(a){var s=(0,n.Z)(a);return s[e]=m(m({},s[e]),{},{resolution:r,customValue:t}),s})},v=function(e){"current"===e?a("current"):"incoming"===e&&a("incoming")};return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)(c.Zb,{children:[(0,d.jsx)(c.Ol,{children:(0,d.jsx)(c.ll,{className:"text-red-600",children:"Conflicto de Edici\xf3n Detectado"})}),(0,d.jsxs)(c.aY,{children:[(0,d.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:(0,d.jsx)("p",{className:"text-red-800",children:"Este registro ha sido modificado por otro usuario mientras usted lo editaba. Por favor, revise los cambios y seleccione c\xf3mo resolver los conflictos."})}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,d.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,d.jsx)("h3",{className:"font-semibold text-blue-800 mb-2",children:"Su Versi\xf3n"}),(0,d.jsxs)("p",{className:"text-sm text-blue-700",children:["\xdaltima actualizaci\xf3n: ",g(r.updatedAt)]}),(0,d.jsxs)("p",{className:"text-sm text-blue-700",children:["Por: ",r.updatedBy]})]}),(0,d.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,d.jsx)("h3",{className:"font-semibold text-green-800 mb-2",children:"Versi\xf3n del Servidor"}),(0,d.jsxs)("p",{className:"text-sm text-green-700",children:["\xdaltima actualizaci\xf3n: ",g(t.updatedAt)]}),(0,d.jsxs)("p",{className:"text-sm text-green-700",children:["Por: ",t.updatedBy]})]})]}),(0,d.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,d.jsx)(i.z,{variant:"outline",onClick:function(){return v("current")},children:"Mantener Mi Versi\xf3n"}),(0,d.jsx)(i.z,{variant:"outline",onClick:function(){return v("incoming")},children:"Usar Versi\xf3n del Servidor"}),(0,d.jsx)(i.z,{onClick:function(){var e={data:m({},r.data),metadata:m({},r.metadata)};x.forEach(function(r){var t,a=r.field,n=r.resolution,s=r.currentValue,i=r.incomingValue,c=r.customValue;switch(n){case"current":t=s;break;case"incoming":t=i;break;case"custom":t=c}if(a.startsWith("metadata.")){var l=a.replace("metadata.","");e.metadata||(e.metadata={version:1}),e.metadata[l]=t}else e.data||(e.data={}),e.data[a]=t}),a("merge",e)},children:"Resolver Manualmente"}),(0,d.jsx)(i.z,{variant:"ghost",onClick:u,children:"Cancelar"})]})]})]}),x.length>0&&(0,d.jsxs)(c.Zb,{children:[(0,d.jsx)(c.Ol,{children:(0,d.jsxs)(c.ll,{children:["Conflictos Detectados (",x.length,")"]})}),(0,d.jsx)(c.aY,{children:(0,d.jsx)("div",{className:"space-y-6",children:x.map(function(e,r){return(0,d.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,d.jsxs)("h4",{className:"font-semibold text-gray-900 mb-3",children:["Campo: ",e.field]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,d.jsx)("input",{type:"radio",name:"conflict-".concat(r),checked:"current"===e.resolution,onChange:function(){return f(r,"current")},className:"text-blue-600"}),(0,d.jsx)("span",{className:"font-medium text-blue-800",children:"Su Valor"})]}),(0,d.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded p-3",children:(0,d.jsx)("pre",{className:"text-sm text-blue-900 whitespace-pre-wrap",children:b(e.currentValue)})})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,d.jsx)("input",{type:"radio",name:"conflict-".concat(r),checked:"incoming"===e.resolution,onChange:function(){return f(r,"incoming")},className:"text-green-600"}),(0,d.jsx)("span",{className:"font-medium text-green-800",children:"Valor del Servidor"})]}),(0,d.jsx)("div",{className:"bg-green-50 border border-green-200 rounded p-3",children:(0,d.jsx)("pre",{className:"text-sm text-green-900 whitespace-pre-wrap",children:b(e.incomingValue)})})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,d.jsx)("input",{type:"radio",name:"conflict-".concat(r),checked:"custom"===e.resolution,onChange:function(){return f(r,"custom",e.customValue||"")},className:"text-purple-600"}),(0,d.jsx)("span",{className:"font-medium text-purple-800",children:"Valor Personalizado"})]}),"custom"===e.resolution&&(0,d.jsx)("div",{className:"bg-purple-50 border border-purple-200 rounded p-3",children:(0,d.jsx)("textarea",{className:"w-full h-20 p-2 border border-purple-300 rounded text-sm",placeholder:"Ingrese un valor personalizado...",value:e.customValue||"",onChange:function(e){return f(r,"custom",e.target.value)}})})]})]},r)})})})]})]})}},83915:function(e,r,t){t.d(r,{d:function(){return s}});var a=t(36118),n=t(57437);function s(e){var r=e.error;return(0,n.jsxs)("div",{className:"container mx-auto py-6 space-y-6",children:[(0,n.jsx)("div",{children:(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Error"})}),(0,n.jsx)(a.Zb,{children:(0,n.jsx)(a.aY,{className:"pt-6",children:(0,n.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:r})})})]})}},19163:function(e,r,t){t.d(r,{p:function(){return n}});var a=t(57437);function n(){return(0,a.jsx)("div",{className:"container mx-auto py-6",children:(0,a.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:"Cargando registro..."})]})})}}}]);