"use strict";exports.id=52,exports.ids=[52],exports.modules={41090:(e,r,t)=>{t.d(r,{W:()=>m});var a=t(31694),s=t(16546),n=t(27667),i=t(27671),l=t(17785),c=t(52166);function d(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,a)}return t}function o(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?d(Object(t),!0).forEach(function(r){var a,s;a=r,s=t[r],(a=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,r||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}(a))in e?Object.defineProperty(e,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[a]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function m({currentRecord:e,conflictingRecord:r,onResolve:t,onCancel:d}){let{0:m,1:u}=(0,a.useState)(()=>{let t=[];return new Set([...Object.keys(e.data),...Object.keys(r.data)]).forEach(a=>{let s=e.data[a],n=r.data[a];JSON.stringify(s)!==JSON.stringify(n)&&t.push({field:a,currentValue:s,incomingValue:n,resolution:"current"})}),e.metadata?.category!==r.metadata?.category&&t.push({field:"metadata.category",currentValue:e.metadata?.category,incomingValue:r.metadata?.category,resolution:"current"}),e.metadata?.priority!==r.metadata?.priority&&t.push({field:"metadata.priority",currentValue:e.metadata?.priority,incomingValue:r.metadata?.priority,resolution:"current"}),(e.metadata?.tags?.sort().join(",")||"")!==(r.metadata?.tags?.sort().join(",")||"")&&t.push({field:"metadata.tags",currentValue:e.metadata?.tags,incomingValue:r.metadata?.tags,resolution:"current"}),t}),p=e=>{try{return(0,i.Q)(new Date(e),{addSuffix:!0,locale:l.es})}catch{return e}},x=e=>null==e?"Sin valor":Array.isArray(e)?e.join(", "):"object"==typeof e?JSON.stringify(e,null,2):String(e),b=(e,r,t)=>{u(a=>{let s=[...a];return s[e]=o(o({},s[e]),{},{resolution:r,customValue:t}),s})},h=e=>{"current"===e?t("current"):"incoming"===e&&t("incoming")};return(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)(n.Zb,{children:[c.jsx(n.Ol,{children:c.jsx(n.ll,{className:"text-red-600",children:"Conflicto de Edici\xf3n Detectado"})}),(0,c.jsxs)(n.aY,{children:[c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:c.jsx("p",{className:"text-red-800",children:"Este registro ha sido modificado por otro usuario mientras usted lo editaba. Por favor, revise los cambios y seleccione c\xf3mo resolver los conflictos."})}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,c.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Su Versi\xf3n"}),(0,c.jsxs)("p",{className:"text-sm text-blue-700",children:["\xdaltima actualizaci\xf3n: ",p(e.updatedAt)]}),(0,c.jsxs)("p",{className:"text-sm text-blue-700",children:["Por: ",e.updatedBy]})]}),(0,c.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"Versi\xf3n del Servidor"}),(0,c.jsxs)("p",{className:"text-sm text-green-700",children:["\xdaltima actualizaci\xf3n: ",p(r.updatedAt)]}),(0,c.jsxs)("p",{className:"text-sm text-green-700",children:["Por: ",r.updatedBy]})]})]}),(0,c.jsxs)("div",{className:"flex gap-2 mb-6",children:[c.jsx(s.z,{variant:"outline",onClick:()=>h("current"),children:"Mantener Mi Versi\xf3n"}),c.jsx(s.z,{variant:"outline",onClick:()=>h("incoming"),children:"Usar Versi\xf3n del Servidor"}),c.jsx(s.z,{onClick:()=>{let r={data:o({},e.data),metadata:o({},e.metadata)};m.forEach(e=>{let t;let{field:a,resolution:s,currentValue:n,incomingValue:i,customValue:l}=e;switch(s){case"current":t=n;break;case"incoming":t=i;break;case"custom":t=l}if(a.startsWith("metadata.")){let e=a.replace("metadata.","");r.metadata||(r.metadata={version:1}),r.metadata[e]=t}else r.data||(r.data={}),r.data[a]=t}),t("merge",r)},children:"Resolver Manualmente"}),c.jsx(s.z,{variant:"ghost",onClick:d,children:"Cancelar"})]})]})]}),m.length>0&&(0,c.jsxs)(n.Zb,{children:[c.jsx(n.Ol,{children:(0,c.jsxs)(n.ll,{children:["Conflictos Detectados (",m.length,")"]})}),c.jsx(n.aY,{children:c.jsx("div",{className:"space-y-6",children:m.map((e,r)=>(0,c.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,c.jsxs)("h4",{className:"font-semibold text-gray-900 mb-3",children:["Campo: ",e.field]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsxs)("label",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"radio",name:`conflict-${r}`,checked:"current"===e.resolution,onChange:()=>b(r,"current"),className:"text-blue-600"}),c.jsx("span",{className:"font-medium text-blue-800",children:"Su Valor"})]}),c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded p-3",children:c.jsx("pre",{className:"text-sm text-blue-900 whitespace-pre-wrap",children:x(e.currentValue)})})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsxs)("label",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"radio",name:`conflict-${r}`,checked:"incoming"===e.resolution,onChange:()=>b(r,"incoming"),className:"text-green-600"}),c.jsx("span",{className:"font-medium text-green-800",children:"Valor del Servidor"})]}),c.jsx("div",{className:"bg-green-50 border border-green-200 rounded p-3",children:c.jsx("pre",{className:"text-sm text-green-900 whitespace-pre-wrap",children:x(e.incomingValue)})})]})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsxs)("label",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"radio",name:`conflict-${r}`,checked:"custom"===e.resolution,onChange:()=>b(r,"custom",e.customValue||""),className:"text-purple-600"}),c.jsx("span",{className:"font-medium text-purple-800",children:"Valor Personalizado"})]}),"custom"===e.resolution&&c.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded p-3",children:c.jsx("textarea",{className:"w-full h-20 p-2 border border-purple-300 rounded text-sm",placeholder:"Ingrese un valor personalizado...",value:e.customValue||"",onChange:e=>b(r,"custom",e.target.value)})})]})]},r))})})]})]})}},77647:(e,r,t)=>{t.d(r,{d:()=>n});var a=t(27667),s=t(52166);function n({error:e}){return(0,s.jsxs)("div",{className:"container mx-auto py-6 space-y-6",children:[s.jsx("div",{children:s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Error"})}),s.jsx(a.Zb,{children:s.jsx(a.aY,{className:"pt-6",children:s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:e})})})]})}},44374:(e,r,t)=>{t.d(r,{p:()=>s});var a=t(52166);function s(){return a.jsx("div",{className:"container mx-auto py-6",children:(0,a.jsxs)("div",{className:"flex justify-center items-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),a.jsx("span",{className:"ml-2 text-gray-600",children:"Cargando registro..."})]})})}}};