"use strict";exports.id=37,exports.ids=[37],exports.modules={42037:(e,t,r)=>{r.d(t,{v:()=>u});var a=r(31694),o=r(16546),i=r(3113),n=r(27667);r(76344);var s=r(52166);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){var a,o;a=t,o=r[t],(a=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(a))in e?Object.defineProperty(e,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[a]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u({record:e,onSave:t,onCancel:r,isLoading:l=!1}){let{0:u,1:d}=(0,a.useState)([]),{0:p,1:y}=(0,a.useState)({type:e?.type||"",category:e?.metadata?.category||"",priority:e?.metadata?.priority||"medium",tags:e?.metadata?.tags?.join(", ")||""}),{0:m,1:b}=(0,a.useState)([]),{0:h,1:g}=(0,a.useState)({}),f=(e,t)=>{y(r=>c(c({},r),{},{[e]:t})),h[e]&&g(t=>c(c({},t),{},{[e]:""}))},v=(e,t,r)=>{b(a=>{let o=[...a];return o[e]=c(c({},o[e]),{},{[t]:r}),o})},x=()=>{b(e=>[...e,{key:"",value:"",type:"text"}])},j=e=>{b(t=>t.filter((t,r)=>r!==e))},O=()=>{let e={};p.type.trim()||(e.type="El tipo de registro es obligatorio"),m.forEach((t,r)=>{t.key.trim()||(e[`field_${r}_key`]="El nombre del campo es obligatorio"),(""===t.value||null===t.value||void 0===t.value)&&(e[`field_${r}_value`]="El valor del campo es obligatorio")});let t=m.map(e=>e.key.trim()).filter(e=>e),r=t.filter((e,r)=>t.indexOf(e)!==r);return r.length>0&&r.forEach(t=>{let r=m.findIndex(e=>e.key===t);e[`field_${r}_key`]="El nombre del campo debe ser \xfanico"}),g(e),0===Object.keys(e).length},P=async r=>{if(r.preventDefault(),O())try{let r=m.reduce((e,t)=>{if(t.key.trim()){let r=t.value;switch(t.type){case"number":r=Number(r);break;case"boolean":r=!!r;break;default:r=String(r)}e[t.key.trim()]=r}return e},{}),a={type:p.type,data:r,metadata:{version:e?.metadata?.version||1,category:p.category||void 0,priority:p.priority,tags:p.tags?p.tags.split(",").map(e=>e.trim()).filter(e=>e):void 0}};await t(a)}catch(e){console.error("Error saving record:",e)}};return(0,s.jsxs)("form",{onSubmit:P,className:"space-y-6",children:[(0,s.jsxs)(n.Zb,{children:[s.jsx(n.Ol,{children:s.jsx(n.ll,{children:"Informaci\xf3n General"})}),(0,s.jsxs)(n.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Registro *"}),u.length>0?(0,s.jsxs)("select",{className:"w-full h-10 px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:p.type,onChange:e=>f("type",e.target.value),required:!0,children:[s.jsx("option",{value:"",children:"Seleccionar tipo"}),u.map(e=>s.jsx("option",{value:e,children:e},e))]}):s.jsx(i.I,{placeholder:"Ingrese el tipo de registro",value:p.type,onChange:e=>f("type",e.target.value),error:h.type,required:!0}),h.type&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.type})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categor\xeda"}),s.jsx(i.I,{placeholder:"Categor\xeda del registro",value:p.category,onChange:e=>f("category",e.target.value)})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prioridad"}),(0,s.jsxs)("select",{className:"w-full h-10 px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:p.priority,onChange:e=>f("priority",e.target.value),children:[s.jsx("option",{value:"low",children:"Baja"}),s.jsx("option",{value:"medium",children:"Media"}),s.jsx("option",{value:"high",children:"Alta"})]})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Etiquetas"}),s.jsx(i.I,{placeholder:"Etiquetas separadas por comas",value:p.tags,onChange:e=>f("tags",e.target.value)}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Separe m\xfaltiples etiquetas con comas"})]})]})]}),(0,s.jsxs)(n.Zb,{children:[s.jsx(n.Ol,{children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[s.jsx(n.ll,{children:"Datos del Registro"}),s.jsx(o.z,{type:"button",variant:"outline",size:"sm",onClick:x,children:"Agregar Campo"})]})}),(0,s.jsxs)(n.aY,{className:"space-y-4",children:[m.map((e,t)=>(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 border border-gray-200 rounded-lg",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Campo *"}),s.jsx(i.I,{placeholder:"nombre_campo",value:e.key,onChange:e=>v(t,"key",e.target.value),error:h[`field_${t}_key`]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),(0,s.jsxs)("select",{className:"w-full h-10 px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:e.type,onChange:e=>v(t,"type",e.target.value),children:[s.jsx("option",{value:"text",children:"Texto"}),s.jsx("option",{value:"number",children:"N\xfamero"}),s.jsx("option",{value:"boolean",children:"Booleano"}),s.jsx("option",{value:"date",children:"Fecha"}),s.jsx("option",{value:"email",children:"Email"}),s.jsx("option",{value:"url",children:"URL"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor *"}),"boolean"===e.type?(0,s.jsxs)("select",{className:"w-full h-10 px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:e.value.toString(),onChange:e=>v(t,"value","true"===e.target.value),children:[s.jsx("option",{value:"true",children:"Verdadero"}),s.jsx("option",{value:"false",children:"Falso"})]}):s.jsx(i.I,{type:"number"===e.type?"number":"date"===e.type?"date":e.type,placeholder:"Valor del campo",value:e.value,onChange:e=>v(t,"value",e.target.value),error:h[`field_${t}_value`]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx(o.z,{type:"button",variant:"outline",size:"sm",onClick:()=>j(t),disabled:1===m.length,className:"text-red-600 hover:text-red-700",children:"Eliminar"})})]},t)),0===m.length&&(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[s.jsx("p",{children:"No hay campos de datos definidos"}),s.jsx(o.z,{type:"button",variant:"outline",onClick:x,className:"mt-2",children:"Agregar Primer Campo"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4",children:[s.jsx(o.z,{type:"button",variant:"outline",onClick:r,disabled:l,children:"Cancelar"}),(0,s.jsxs)(o.z,{type:"submit",isLoading:l,children:[e?"Actualizar":"Crear"," Registro"]})]})]})}},34567:(e,t,r)=>{function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){i(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function i(e,t,r){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{hi:()=>l,x1:()=>s});class n{constructor(e="http://localhost:3001"){i(this,"baseURL",void 0),this.baseURL=e}async request(e,t={}){let r=`${this.baseURL}${e}`,a=o({headers:o({"Content-Type":"application/json"},t.headers)},t),i=localStorage.getItem("accessToken");i&&(a.headers=o(o({},a.headers),{},{Authorization:`Bearer ${i}`}));try{let e=await fetch(r,a),t=await e.json();if(!e.ok)throw Error(t.error?.message||"API request failed");return t}catch(e){throw console.error("API request error:",e),e}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}}let s=new n,l=s},76344:(e,t,r)=>{r.d(t,{c:()=>l});var a=r(34567);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function n(e,t,r){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){n(this,"basePath","/api/data-records")}async getRecords(e){let t=new URLSearchParams;return e.query&&t.append("query",e.query),e.sortBy&&t.append("sortBy",e.sortBy),e.sortOrder&&t.append("sortOrder",e.sortOrder),t.append("page",e.page.toString()),t.append("limit",e.limit.toString()),Object.entries(e.filters).forEach(([e,r])=>{null!=r&&""!==r&&(Array.isArray(r)?r.forEach(r=>t.append(`${e}[]`,r.toString())):t.append(e,r.toString()))}),a.x1.get(`${this.basePath}?${t.toString()}`)}async getRecord(e){return a.x1.get(`${this.basePath}/${e}`)}async createRecord(e){return a.x1.post(this.basePath,e)}async updateRecord(e,t){return a.x1.put(`${this.basePath}/${e}`,t)}async updateRecordWithVersion(e,t,r){return a.x1.put(`${this.basePath}/${e}`,i(i({},t),{},{expectedVersion:r}))}async checkForConflicts(e,t){return a.x1.get(`${this.basePath}/${e}/conflict-check?version=${t}`)}async deleteRecord(e){return a.x1.delete(`${this.basePath}/${e}`)}async getRecordTypes(){return a.x1.get(`${this.basePath}/types`)}async getRecordHistory(e){return a.x1.get(`${this.basePath}/${e}/history`)}}let l=new s}};