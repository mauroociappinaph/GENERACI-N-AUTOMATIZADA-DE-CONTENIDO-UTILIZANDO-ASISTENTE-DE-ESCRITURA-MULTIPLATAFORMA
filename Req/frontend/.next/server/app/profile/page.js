(()=>{var e={};e.id=178,e.ids=[178],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},67022:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),t(91450),t(18373),t(52593);var a=t(93826),s=t(49930),i=t(42049),o=t.n(i),n=t(88405),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);t.d(r,l);let c=["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,91450)),"/Users/mauroociappina/Desktop/Dazlab/Proyecto 40/Repo/gravitad-040-2024-gravitad-generacio-actualizada-contenido-asist-de-escritura-plataforma/Req/frontend/src/app/profile/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,18373)),"/Users/mauroociappina/Desktop/Dazlab/Proyecto 40/Repo/gravitad-040-2024-gravitad-generacio-actualizada-contenido-asist-de-escritura-plataforma/Req/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,52593,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/mauroociappina/Desktop/Dazlab/Proyecto 40/Repo/gravitad-040-2024-gravitad-generacio-actualizada-contenido-asist-de-escritura-plataforma/Req/frontend/src/app/profile/page.tsx"],u="/profile/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},65277:(e,r,t)=>{Promise.resolve().then(t.bind(t,93991))},31324:(e,r,t)=>{"use strict";var a=t(90567);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})},93991:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>y});var a=t(27667),s=t(16546),i=t(31694),o=t(31324),n=t(54566),l=t(63202),c=t(34567);let d=()=>{let e=(0,o.useRouter)(),{token:r}=(0,l.t)(),{toast:t}=(0,n.p)(),{0:a,1:s}=(0,i.useState)(null),{0:d,1:u}=(0,i.useState)(!0),{0:p,1:m}=(0,i.useState)(!1),{0:f,1:h}=(0,i.useState)(!1),{0:g,1:x}=(0,i.useState)({email:"",firstName:"",lastName:""}),b=(0,i.useCallback)(async()=>{try{let e=await c.hi.get("/api/users/profile");if(!e?.data?.user)throw Error("Respuesta de API inv\xe1lida");s(e.data.user),x({email:e.data.user.email,firstName:e.data.user.firstName,lastName:e.data.user.lastName})}catch(e){console.error("Error fetching profile:",e),t({title:"Error",description:"No se pudo cargar el perfil",variant:"destructive"})}finally{u(!1)}},[t]),v=async()=>{h(!0);try{let e=await c.hi.put("/api/users/profile",g);if(!e?.data?.user)throw Error("Respuesta de API inv\xe1lida");s(e.data.user),m(!1),t({title:"\xc9xito",description:"Perfil actualizado correctamente"})}catch(e){t({title:"Error",description:e instanceof Error?e.message:"Error al actualizar perfil",variant:"destructive"})}finally{h(!1)}};return(0,i.useEffect)(()=>{if(!r){e.push("/login");return}b()},[r,e,b]),{profile:a,isLoading:d,isEditing:p,isSaving:f,formData:g,setFormData:x,setIsEditing:m,handleSave:v,handleCancel:()=>{a&&x({email:a.email,firstName:a.firstName,lastName:a.lastName}),m(!1)}}};var u=t(52166);let p=()=>u.jsx("div",{className:"container mx-auto px-4 py-8",children:u.jsx("div",{className:"max-w-2xl mx-auto",children:(0,u.jsxs)("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),u.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,u.jsxs)("div",{className:"space-y-4",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),u.jsx("div",{className:"h-10 bg-gray-200 rounded"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),u.jsx("div",{className:"h-10 bg-gray-200 rounded"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),u.jsx("div",{className:"h-10 bg-gray-200 rounded"})]})})]})})});function m({message:e="No se pudo cargar el perfil del usuario."}){let r=(0,o.useRouter)();return u.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,u.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Error"}),u.jsx("p",{className:"text-gray-600",children:e}),u.jsx(s.z,{onClick:()=>r.push("/dashboard"),className:"mt-4",children:"Volver al Dashboard"})]})})}var f=t(3113);let h=({label:e,value:r,isEditing:t,onChange:a,placeholder:s,type:i="text"})=>(0,u.jsxs)("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e}),t?u.jsx(f.I,{type:i,value:r,onChange:e=>a?.(e.target.value),placeholder:s}):u.jsx("p",{className:"text-gray-900 bg-gray-50 px-3 py-2 rounded-md",children:r})]}),g=({label:e,children:r})=>(0,u.jsxs)("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e}),u.jsx("div",{className:"text-gray-900 bg-gray-50 px-3 py-2 rounded-md",children:r})]});function x(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,a)}return t}function b(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?x(Object(t),!0).forEach(function(r){var a,s;a=r,s=t[r],(a=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,r||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}(a))in e?Object.defineProperty(e,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[a]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function v({profile:e,isEditing:r,formData:t,setFormData:a}){return(0,u.jsxs)("div",{className:"space-y-6",children:[u.jsx(h,{label:"Correo Electr\xf3nico",value:r?t.email:e.email,isEditing:r,onChange:e=>a(b(b({},t),{},{email:e})),placeholder:"correo@ejemplo.com",type:"email"}),u.jsx(h,{label:"Nombre",value:r?t.firstName:e.firstName,isEditing:r,onChange:e=>a(b(b({},t),{},{firstName:e})),placeholder:"Nombre"}),u.jsx(h,{label:"Apellido",value:r?t.lastName:e.lastName,isEditing:r,onChange:e=>a(b(b({},t),{},{lastName:e})),placeholder:"Apellido"}),u.jsx(g,{label:"Rol",children:e.role}),u.jsx(g,{label:"Estado",children:u.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.isActive?"Activo":"Inactivo"})}),u.jsx(g,{label:"Fecha de Registro",children:new Date(e.createdAt).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})}function y(){let{profile:e,isLoading:r,isEditing:t,isSaving:i,formData:o,setFormData:n,setIsEditing:l,handleSave:c,handleCancel:f}=d();return r?u.jsx(p,{}):e?u.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,u.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mi Perfil"}),!t&&u.jsx(s.z,{onClick:()=>l(!0),children:"Editar Perfil"})]}),(0,u.jsxs)(a.Zb,{className:"p-6",children:[u.jsx(v,{profile:e,isEditing:t,formData:o,setFormData:n}),t&&(0,u.jsxs)("div",{className:"flex space-x-4 pt-4",children:[u.jsx(s.z,{onClick:c,disabled:i,className:"flex-1",children:i?"Guardando...":"Guardar Cambios"}),u.jsx(s.z,{variant:"outline",onClick:f,disabled:i,className:"flex-1",children:"Cancelar"})]})]})]})}):u.jsx(m,{})}},54566:(e,r,t)=>{"use strict";t.d(r,{A:()=>i,p:()=>s});var a=t(38597);let s=()=>({toast:e=>{"destructive"===e.variant?a.ZP.error(e.description||e.title||"Error"):a.ZP.success(e.description||e.title||"Success")}}),i=e=>{"destructive"===e.variant?a.ZP.error(e.description||e.title||"Error"):a.ZP.success(e.description||e.title||"Success")}},34567:(e,r,t)=>{"use strict";function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,a)}return t}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach(function(r){i(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function i(e,r,t){var a;return(r="symbol"==typeof(a=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,r||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(r,"string"))?a:String(a))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}t.d(r,{hi:()=>l,x1:()=>n});class o{constructor(e="http://localhost:3001"){i(this,"baseURL",void 0),this.baseURL=e}async request(e,r={}){let t=`${this.baseURL}${e}`,a=s({headers:s({"Content-Type":"application/json"},r.headers)},r),i=localStorage.getItem("accessToken");i&&(a.headers=s(s({},a.headers),{},{Authorization:`Bearer ${i}`}));try{let e=await fetch(t,a),r=await e.json();if(!e.ok)throw Error(r.error?.message||"API request failed");return r}catch(e){throw console.error("API request error:",e),e}}async get(e){return this.request(e,{method:"GET"})}async post(e,r){return this.request(e,{method:"POST",body:r?JSON.stringify(r):void 0})}async put(e,r){return this.request(e,{method:"PUT",body:r?JSON.stringify(r):void 0})}async patch(e,r){return this.request(e,{method:"PATCH",body:r?JSON.stringify(r):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}}let n=new o,l=n},91450:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(87866).createProxy)(String.raw`/Users/mauroociappina/Desktop/Dazlab/Proyecto 40/Repo/gravitad-040-2024-gravitad-generacio-actualizada-contenido-asist-de-escritura-plataforma/Req/frontend/src/app/profile/page.tsx#default`)}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[588,361,741],()=>t(67022));module.exports=a})();