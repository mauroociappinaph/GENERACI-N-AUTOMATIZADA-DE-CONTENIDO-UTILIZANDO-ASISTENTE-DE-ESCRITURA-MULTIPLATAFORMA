(()=>{var e={};e.id=626,e.ids=[626],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},91212:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),a(98476),a(18373),a(52593);var t=a(93826),s=a(49930),o=a(42049),n=a.n(o),i=a(88405),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);a.d(r,l);let c=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,98476)),"/Users/mauroociappina/Desktop/Dazlab/Proyecto 40/Repo/gravitad-040-2024-gravitad-generacio-actualizada-contenido-asist-de-escritura-plataforma/Req/frontend/src/app/login/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,18373)),"/Users/mauroociappina/Desktop/Dazlab/Proyecto 40/Repo/gravitad-040-2024-gravitad-generacio-actualizada-contenido-asist-de-escritura-plataforma/Req/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,52593,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/mauroociappina/Desktop/Dazlab/Proyecto 40/Repo/gravitad-040-2024-gravitad-generacio-actualizada-contenido-asist-de-escritura-plataforma/Req/frontend/src/app/login/page.tsx"],u="/login/page",p={require:a,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},11594:(e,r,a)=>{Promise.resolve().then(a.bind(a,87431))},31324:(e,r,a)=>{"use strict";var t=a(90567);a.o(t,"useParams")&&a.d(r,{useParams:function(){return t.useParams}}),a.o(t,"usePathname")&&a.d(r,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(r,{useRouter:function(){return t.useRouter}})},87431:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>p});var t=a(16546),s=a(3113),o=a(27667),n=a(63202);class i{static getBackendUrl(){return"http://localhost:3001"}static async login(e){try{let r=await fetch(`${this.getBackendUrl()}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){let e=await r.json();throw Error(e.error?.message||"Error al iniciar sesi\xf3n")}let a=await r.json();if(!a.data)throw Error("Respuesta inv\xe1lida del servidor");return a.data}catch(e){throw console.error("Login error:",e),e instanceof Error?e:Error("Error al iniciar sesi\xf3n")}}static async refreshToken(e){try{let r=await fetch(`${this.getBackendUrl()}/api/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})});if(!r.ok){let e=await r.json();throw Error(e.error?.message||"Error al refrescar token")}let a=await r.json();if(!a.data)throw Error("Respuesta inv\xe1lida del servidor");return a.data}catch(e){throw console.error("Refresh token error:",e),e instanceof Error?e:Error("Error al refrescar token")}}static async logout(e){try{(await fetch(`${this.getBackendUrl()}/api/auth/logout`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).ok||console.warn("Logout request failed, but continuing with client-side logout")}catch(e){console.warn("Logout error:",e)}}static async getCurrentUser(e){try{let r=await fetch(`${this.getBackendUrl()}/api/auth/me`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!r.ok){let e=await r.json();throw Error(e.error?.message||"Error al obtener informaci\xf3n del usuario")}let a=await r.json();if(!a.data?.user)throw Error("Respuesta inv\xe1lida del servidor");return a.data.user}catch(e){throw console.error("Get current user error:",e),e instanceof Error?e:Error("Error al obtener informaci\xf3n del usuario")}}static async verifyToken(e){try{return await this.getCurrentUser(e),!0}catch(e){return!1}}}var l=a(31694),c=a(31324),d=a(69805),u=a(52166);function p(){let{0:e,1:r}=(0,l.useState)(""),{0:a,1:p}=(0,l.useState)(""),{0:m,1:h}=(0,l.useState)(null),{0:g,1:x}=(0,l.useState)(!1),{login:f}=(0,n.t)(),y=(0,c.useRouter)(),v=async r=>{r.preventDefault(),h(null),x(!0);try{if(!e||!a)throw Error("Por favor, complete todos los campos");let r=await i.login({email:e,password:a});f(r.accessToken,r.user),y.push("/")}catch(e){h(e instanceof Error?e.message:"Error al iniciar sesi\xf3n")}finally{x(!1)}};return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,u.jsxs)(o.Zb,{className:"w-full max-w-md",children:[(0,u.jsxs)(o.Ol,{className:"space-y-1",children:[u.jsx(o.ll,{className:"text-2xl font-bold text-center",children:"Sistema de Gesti\xf3n #040"}),u.jsx(o.SZ,{className:"text-center",children:"Ingrese sus credenciales para acceder al sistema"})]}),(0,u.jsxs)("form",{onSubmit:v,children:[(0,u.jsxs)(o.aY,{className:"space-y-4",children:[m&&u.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md text-sm",children:m}),(0,u.jsxs)("div",{className:"space-y-2",children:[u.jsx("label",{htmlFor:"email",className:"text-sm font-medium",children:"Correo electr\xf3nico"}),u.jsx(s.I,{id:"email",type:"email",placeholder:"correo@ejemplo.com",value:e,onChange:e=>r(e.target.value),required:!0})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[u.jsx("label",{htmlFor:"password",className:"text-sm font-medium",children:"Contrase\xf1a"}),u.jsx(d.default,{href:"/recuperar-password",className:"text-sm text-blue-600 hover:text-blue-500",children:"\xbfOlvid\xf3 su contrase\xf1a?"})]}),u.jsx(s.I,{id:"password",type:"password",placeholder:"••••••••",value:a,onChange:e=>p(e.target.value),required:!0})]})]}),(0,u.jsxs)(o.eW,{className:"flex flex-col space-y-4",children:[u.jsx(t.z,{type:"submit",className:"w-full",isLoading:g,children:"Iniciar sesi\xf3n"}),(0,u.jsxs)("p",{className:"text-center text-sm text-gray-600",children:["\xbfProblemas para acceder?"," ",u.jsx(d.default,{href:"/contacto",className:"text-blue-600 hover:text-blue-500",children:"Contacte a soporte"})]})]})]})]})})}},98476:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>t});let t=(0,a(87866).createProxy)(String.raw`/Users/mauroociappina/Desktop/Dazlab/Proyecto 40/Repo/gravitad-040-2024-gravitad-generacio-actualizada-contenido-asist-de-escritura-plataforma/Req/frontend/src/app/login/page.tsx#default`)}};var r=require("../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[588,361,805,741],()=>a(91212));module.exports=t})();