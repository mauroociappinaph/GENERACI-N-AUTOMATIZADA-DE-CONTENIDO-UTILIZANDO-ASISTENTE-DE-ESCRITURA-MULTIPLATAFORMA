(()=>{var e={};e.id=140,e.ids=[140],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},89026:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>o}),s(52933),s(18373),s(52593);var a=s(93826),r=s(49930),i=s(42049),l=s.n(i),n=s(88405),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let o=["",{children:["admin",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,52933)),"/Users/mauroociappina/Desktop/Dazlab/Proyecto 40/Repo/gravitad-040-2024-gravitad-generacio-actualizada-contenido-asist-de-escritura-plataforma/Req/frontend/src/app/admin/settings/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,18373)),"/Users/mauroociappina/Desktop/Dazlab/Proyecto 40/Repo/gravitad-040-2024-gravitad-generacio-actualizada-contenido-asist-de-escritura-plataforma/Req/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,52593,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/mauroociappina/Desktop/Dazlab/Proyecto 40/Repo/gravitad-040-2024-gravitad-generacio-actualizada-contenido-asist-de-escritura-plataforma/Req/frontend/src/app/admin/settings/page.tsx"],m="/admin/settings/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/settings/page",pathname:"/admin/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},16371:(e,t,s)=>{Promise.resolve().then(s.bind(s,36911))},36911:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var a=s(31694),r=s(32916),i=s(27667),l=s(66352),n=s(16546),d=s(3113),o=s(34567);function c(){let{0:e,1:t}=(0,a.useState)(null),{0:s,1:r}=(0,a.useState)([]),{0:i,1:l}=(0,a.useState)([]),{0:n,1:d}=(0,a.useState)(null),{0:c,1:m}=(0,a.useState)(!1),{0:u,1:x}=(0,a.useState)(null),{0:g,1:h}=(0,a.useState)({page:1,limit:10,total:0,totalPages:0}),{0:p,1:b}=(0,a.useState)({page:1,limit:50,total:0,totalPages:0}),j=(0,a.useCallback)(async()=>{try{m(!0),x(null);let e=await o.hi.get("/system-config");if(e.data.success)t(e.data.data.config);else throw Error("Error al obtener configuraci\xf3n del sistema")}catch(e){x(e.response?.data?.error?.message||"Error al obtener configuraci\xf3n del sistema"),console.error("Error fetching system config:",e)}finally{m(!1)}},[]),f=(0,a.useCallback)(async e=>{try{x(null);let s=await o.hi.put("/system-config",e);if(!s.data.success)throw Error("Error al actualizar configuraci\xf3n del sistema");return t(s.data.data.config),s.data.data.config}catch(t){let e=t.response?.data?.error?.message||"Error al actualizar configuraci\xf3n del sistema";throw x(e),Error(e)}},[]),v=(0,a.useCallback)(async(e=1,t=10)=>{try{m(!0),x(null);let s=await o.hi.get(`/system-config/backups?page=${e}&limit=${t}`);if(s.data.success)r(s.data.data.backups),h({page:s.data.data.page,limit:s.data.data.limit||10,total:s.data.data.total,totalPages:s.data.data.totalPages});else throw Error("Error al obtener respaldos")}catch(e){x(e.response?.data?.error?.message||"Error al obtener respaldos"),console.error("Error fetching backups:",e)}finally{m(!1)}},[]),y=(0,a.useCallback)(async e=>{try{x(null);let t=await o.hi.post("/system-config/backups",{description:e});if(!t.data.success)throw Error("Error al crear respaldo");return t.data.data.backup}catch(t){let e=t.response?.data?.error?.message||"Error al crear respaldo";throw x(e),Error(e)}},[]),N=(0,a.useCallback)(async e=>{try{if(x(null),!(await o.hi.post(`/system-config/backups/${e}/restore`)).data.success)throw Error("Error al restaurar respaldo");return!0}catch(t){let e=t.response?.data?.error?.message||"Error al restaurar respaldo";throw x(e),Error(e)}},[]);return{config:e,backups:s,logs:i,metrics:n,loading:c,error:u,backupPagination:g,logPagination:p,fetchSystemConfig:j,updateSystemConfig:f,fetchBackups:v,createBackup:y,restoreBackup:N,fetchLogs:(0,a.useCallback)(async(e={})=>{try{m(!0),x(null);let t=new URLSearchParams;e.page&&t.append("page",e.page.toString()),e.limit&&t.append("limit",e.limit.toString()),e.level&&t.append("level",e.level),e.startDate&&t.append("startDate",e.startDate),e.endDate&&t.append("endDate",e.endDate);let s=await o.hi.get(`/system-config/logs?${t.toString()}`);if(s.data.success)l(s.data.data.logs),b({page:s.data.data.page,limit:s.data.data.limit||50,total:s.data.data.total,totalPages:s.data.data.totalPages});else throw Error("Error al obtener logs")}catch(e){x(e.response?.data?.error?.message||"Error al obtener logs"),console.error("Error fetching logs:",e)}finally{m(!1)}},[]),cleanupLogs:(0,a.useCallback)(async(e=30)=>{try{x(null);let t=await o.hi.post("/system-config/logs/cleanup",{days:e});if(!t.data.success)throw Error("Error al limpiar logs");return t.data.data}catch(t){let e=t.response?.data?.error?.message||"Error al limpiar logs";throw x(e),Error(e)}},[]),fetchMetrics:(0,a.useCallback)(async()=>{try{m(!0),x(null);let e=await o.hi.get("/system-config/metrics");if(e.data.success)d(e.data.data.metrics);else throw Error("Error al obtener m\xe9tricas")}catch(e){x(e.response?.data?.error?.message||"Error al obtener m\xe9tricas"),console.error("Error fetching metrics:",e)}finally{m(!1)}},[])}}var m=s(52166);function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function x(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach(function(t){var a,r;a=t,r=s[t],(a=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function g(){let{config:e,loading:t,error:s,fetchSystemConfig:r,updateSystemConfig:i}=c(),{0:l,1:o}=(0,a.useState)({siteName:"",siteDescription:"",maintenanceMode:!1,allowRegistration:!0,maxFileUploadSize:10,sessionTimeout:60,emailNotifications:!0,backupRetentionDays:30,logLevel:"info",maxLoginAttempts:5,passwordMinLength:8,requirePasswordComplexity:!0}),{0:u,1:g}=(0,a.useState)(!1),{0:h,1:p}=(0,a.useState)(null),b=(e,t)=>{o(s=>x(x({},s),{},{[e]:t})),p(null)},j=async e=>{e.preventDefault();try{g(!0),p(null),await i(l),p("Configuraci\xf3n guardada exitosamente")}catch(e){console.error("Error saving config:",e)}finally{g(!1)}};return t&&!e?m.jsx("div",{className:"flex justify-center items-center py-8",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,m.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[s&&m.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:s}),h&&m.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:h}),(0,m.jsxs)("div",{className:"space-y-4",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Configuraci\xf3n General"}),(0,m.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"siteName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Sitio"}),m.jsx(d.I,{id:"siteName",type:"text",value:l.siteName,onChange:e=>b("siteName",e.target.value),required:!0})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"siteDescription",className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n del Sitio"}),m.jsx(d.I,{id:"siteDescription",type:"text",value:l.siteDescription,onChange:e=>b("siteDescription",e.target.value)})]})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,m.jsxs)("div",{className:"flex items-center",children:[m.jsx("input",{id:"maintenanceMode",type:"checkbox",checked:l.maintenanceMode,onChange:e=>b("maintenanceMode",e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),m.jsx("label",{htmlFor:"maintenanceMode",className:"ml-2 block text-sm text-gray-900",children:"Modo de Mantenimiento"})]}),(0,m.jsxs)("div",{className:"flex items-center",children:[m.jsx("input",{id:"allowRegistration",type:"checkbox",checked:l.allowRegistration,onChange:e=>b("allowRegistration",e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),m.jsx("label",{htmlFor:"allowRegistration",className:"ml-2 block text-sm text-gray-900",children:"Permitir Registro de Usuarios"})]}),(0,m.jsxs)("div",{className:"flex items-center",children:[m.jsx("input",{id:"emailNotifications",type:"checkbox",checked:l.emailNotifications,onChange:e=>b("emailNotifications",e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),m.jsx("label",{htmlFor:"emailNotifications",className:"ml-2 block text-sm text-gray-900",children:"Notificaciones por Email"})]})]})]}),(0,m.jsxs)("div",{className:"space-y-4",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Archivos y Sesiones"}),(0,m.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"maxFileUploadSize",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tama\xf1o M\xe1ximo de Archivo (MB)"}),m.jsx(d.I,{id:"maxFileUploadSize",type:"number",min:"1",max:"100",value:l.maxFileUploadSize,onChange:e=>b("maxFileUploadSize",parseInt(e.target.value)),required:!0})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"sessionTimeout",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tiempo de Sesi\xf3n (minutos)"}),m.jsx(d.I,{id:"sessionTimeout",type:"number",min:"5",max:"1440",value:l.sessionTimeout,onChange:e=>b("sessionTimeout",parseInt(e.target.value)),required:!0})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"backupRetentionDays",className:"block text-sm font-medium text-gray-700 mb-1",children:"Retenci\xf3n de Respaldos (d\xedas)"}),m.jsx(d.I,{id:"backupRetentionDays",type:"number",min:"1",max:"365",value:l.backupRetentionDays,onChange:e=>b("backupRetentionDays",parseInt(e.target.value)),required:!0})]})]})]}),(0,m.jsxs)("div",{className:"space-y-4",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Seguridad"}),(0,m.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"maxLoginAttempts",className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xe1ximo Intentos de Login"}),m.jsx(d.I,{id:"maxLoginAttempts",type:"number",min:"1",max:"10",value:l.maxLoginAttempts,onChange:e=>b("maxLoginAttempts",parseInt(e.target.value)),required:!0})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"passwordMinLength",className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitud M\xednima de Contrase\xf1a"}),m.jsx(d.I,{id:"passwordMinLength",type:"number",min:"6",max:"50",value:l.passwordMinLength,onChange:e=>b("passwordMinLength",parseInt(e.target.value)),required:!0})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"logLevel",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nivel de Logs"}),(0,m.jsxs)("select",{id:"logLevel",value:l.logLevel,onChange:e=>b("logLevel",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[m.jsx("option",{value:"error",children:"Error"}),m.jsx("option",{value:"warn",children:"Warning"}),m.jsx("option",{value:"info",children:"Info"}),m.jsx("option",{value:"debug",children:"Debug"})]})]})]}),(0,m.jsxs)("div",{className:"flex items-center",children:[m.jsx("input",{id:"requirePasswordComplexity",type:"checkbox",checked:l.requirePasswordComplexity,onChange:e=>b("requirePasswordComplexity",e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),m.jsx("label",{htmlFor:"requirePasswordComplexity",className:"ml-2 block text-sm text-gray-900",children:"Requerir Complejidad en Contrase\xf1as"})]})]}),m.jsx("div",{className:"flex justify-end",children:m.jsx(n.z,{type:"submit",disabled:u,children:u?"Guardando...":"Guardar Configuraci\xf3n"})})]})}function h(){let{backups:e,loading:t,error:s,backupPagination:r,fetchBackups:i,createBackup:l,restoreBackup:o}=c(),{0:u,1:x}=(0,a.useState)(!1),{0:g,1:h}=(0,a.useState)(""),{0:p,1:b}=(0,a.useState)(!1),{0:j,1:f}=(0,a.useState)(null),v=async e=>{e.preventDefault();try{b(!0),await l(g||void 0),h(""),x(!1),i()}catch(e){console.error("Error creating backup:",e)}finally{b(!1)}},y=async e=>{if(window.confirm("\xbfEst\xe1 seguro de que desea restaurar este respaldo? Esta acci\xf3n no se puede deshacer."))try{f(e),await o(e),alert("Respaldo restaurado exitosamente")}catch(e){console.error("Error restoring backup:",e)}finally{f(null)}},N=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,t)).toFixed(2))} ${["Bytes","KB","MB","GB"][t]}`},w=e=>new Date(e).toLocaleString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),D=e=>{i(e,r.limit)};return(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center",children:[(0,m.jsxs)("div",{children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Respaldos de Base de Datos"}),m.jsx("p",{className:"text-sm text-gray-500",children:"Gestione los respaldos de la base de datos del sistema"})]}),m.jsx(n.z,{onClick:()=>x(!0),children:"Crear Respaldo"})]}),s&&m.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:s}),m.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:t&&0===e.length?m.jsx("div",{className:"flex justify-center items-center py-8",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):0===e.length?m.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay respaldos disponibles"}):m.jsx("ul",{className:"divide-y divide-gray-200",children:e.map(e=>m.jsx("li",{className:"px-6 py-4",children:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[m.jsx("div",{className:"flex-1",children:(0,m.jsxs)("div",{className:"flex items-center",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:m.jsx("span",{className:"text-blue-600 font-medium",children:"\uD83D\uDCBE"})})}),(0,m.jsxs)("div",{className:"ml-4",children:[m.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.filename}),e.description&&m.jsx("div",{className:"text-sm text-gray-500",children:e.description}),(0,m.jsxs)("div",{className:"text-xs text-gray-400",children:[N(e.size)," • Creado por"," ",e.createdBy," • ",w(e.createdAt)]})]})]})}),m.jsx("div",{className:"flex items-center space-x-2",children:m.jsx(n.z,{variant:"outline",size:"sm",onClick:()=>y(e.id),disabled:j===e.id,children:j===e.id?"Restaurando...":"Restaurar"})})]})},e.id))})}),r.totalPages>1&&(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"text-sm text-gray-700",children:["Mostrando ",(r.page-1)*r.limit+1," ","a"," ",Math.min(r.page*r.limit,r.total)," ","de ",r.total," respaldos"]}),(0,m.jsxs)("div",{className:"flex gap-2",children:[m.jsx(n.z,{variant:"outline",size:"sm",onClick:()=>D(r.page-1),disabled:r.page<=1,children:"Anterior"}),m.jsx(n.z,{variant:"outline",size:"sm",onClick:()=>D(r.page+1),disabled:r.page>=r.totalPages,children:"Siguiente"})]})]}),u&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,m.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Crear Nuevo Respaldo"}),(0,m.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n (opcional)"}),m.jsx(d.I,{id:"description",type:"text",value:g,onChange:e=>h(e.target.value),placeholder:"Descripci\xf3n del respaldo..."})]}),(0,m.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[m.jsx(n.z,{type:"button",variant:"outline",onClick:()=>{x(!1),h("")},disabled:p,children:"Cancelar"}),m.jsx(n.z,{type:"submit",disabled:p,children:p?"Creando...":"Crear Respaldo"})]})]})]})})]})}function p(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function b(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?p(Object(s),!0).forEach(function(t){var a,r;a=t,r=s[t],(a=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):p(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function j(){let{logs:e,loading:t,error:s,logPagination:r,fetchLogs:i,cleanupLogs:l}=c(),{0:o,1:u}=(0,a.useState)({level:"",startDate:"",endDate:""}),{0:x,1:g}=(0,a.useState)(!1),{0:h,1:p}=(0,a.useState)(30),j=(e,t)=>{u(s=>b(b({},s),{},{[e]:t}))},f=async()=>{if(window.confirm(`\xbfEst\xe1 seguro de que desea eliminar logs anteriores a ${h} d\xedas?`))try{g(!0);let e=await l(h);alert(`Se eliminaron ${e.deletedCount} logs antiguos`),i()}catch(e){console.error("Error cleaning up logs:",e)}finally{g(!1)}},v=e=>({error:"bg-red-100 text-red-800",warn:"bg-yellow-100 text-yellow-800",info:"bg-blue-100 text-blue-800",debug:"bg-gray-100 text-gray-800"})[e]||"bg-gray-100 text-gray-800",y=e=>({error:"\uD83D\uDD34",warn:"\uD83D\uDFE1",info:"\uD83D\uDD35",debug:"⚪"})[e]||"⚪",N=e=>new Date(e).toLocaleString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),w=e=>{i({page:e,limit:r.limit,level:o.level||void 0,startDate:o.startDate||void 0,endDate:o.endDate||void 0})};return(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsxs)("div",{className:"flex justify-between items-start",children:[(0,m.jsxs)("div",{children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Logs del Sistema"}),m.jsx("p",{className:"text-sm text-gray-500",children:"Visualice y gestione los logs del sistema"})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx(d.I,{type:"number",value:h,onChange:e=>p(parseInt(e.target.value)),min:"1",max:"365",className:"w-20"}),m.jsx(n.z,{variant:"outline",onClick:f,disabled:x,children:x?"Limpiando...":"Limpiar Logs"})]})]}),m.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,m.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"level",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nivel"}),(0,m.jsxs)("select",{id:"level",value:o.level,onChange:e=>j("level",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[m.jsx("option",{value:"",children:"Todos los niveles"}),m.jsx("option",{value:"error",children:"Error"}),m.jsx("option",{value:"warn",children:"Warning"}),m.jsx("option",{value:"info",children:"Info"}),m.jsx("option",{value:"debug",children:"Debug"})]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Inicio"}),m.jsx(d.I,{id:"startDate",type:"datetime-local",value:o.startDate,onChange:e=>j("startDate",e.target.value)})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Fin"}),m.jsx(d.I,{id:"endDate",type:"datetime-local",value:o.endDate,onChange:e=>j("endDate",e.target.value)})]}),(0,m.jsxs)("div",{className:"flex items-end gap-2",children:[m.jsx(n.z,{onClick:()=>{i({page:1,limit:r.limit,level:o.level||void 0,startDate:o.startDate||void 0,endDate:o.endDate||void 0})},children:"Aplicar Filtros"}),m.jsx(n.z,{variant:"outline",onClick:()=>{u({level:"",startDate:"",endDate:""}),i({page:1,limit:r.limit})},children:"Limpiar"})]})]})}),s&&m.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:s}),m.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:t&&0===e.length?m.jsx("div",{className:"flex justify-center items-center py-8",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):0===e.length?m.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay logs disponibles"}):m.jsx("ul",{className:"divide-y divide-gray-200",children:e.map(e=>m.jsx("li",{className:"px-6 py-4",children:(0,m.jsxs)("div",{className:"flex items-start",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("span",{className:"text-lg",children:y(e.level)})}),(0,m.jsxs)("div",{className:"ml-3 flex-1",children:[m.jsx("div",{className:"flex items-center justify-between",children:(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[m.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${v(e.level)}`,children:e.level.toUpperCase()}),m.jsx("span",{className:"text-sm text-gray-500",children:N(e.timestamp)})]})}),(0,m.jsxs)("div",{className:"mt-1",children:[m.jsx("p",{className:"text-sm text-gray-900",children:e.message}),e.metadata&&Object.keys(e.metadata).length>0&&m.jsx("div",{className:"mt-2 text-xs text-gray-500",children:(0,m.jsxs)("details",{children:[m.jsx("summary",{className:"cursor-pointer hover:text-gray-700",children:"Ver metadatos"}),m.jsx("pre",{className:"mt-1 bg-gray-100 p-2 rounded text-xs overflow-x-auto",children:JSON.stringify(e.metadata,null,2)})]})})]})]})]})},e.id))})}),r.totalPages>1&&(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"text-sm text-gray-700",children:["Mostrando ",(r.page-1)*r.limit+1," a"," ",Math.min(r.page*r.limit,r.total)," ","de ",r.total," logs"]}),(0,m.jsxs)("div",{className:"flex gap-2",children:[m.jsx(n.z,{variant:"outline",size:"sm",onClick:()=>w(r.page-1),disabled:r.page<=1,children:"Anterior"}),m.jsx(n.z,{variant:"outline",size:"sm",onClick:()=>w(r.page+1),disabled:r.page>=r.totalPages,children:"Siguiente"})]})]})]})}function f(){let{metrics:e,loading:t,error:s,fetchMetrics:r}=c(),{0:i,1:l}=(0,a.useState)(!1),d=e=>{if(0===e)return"0 MB";let t=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,t)).toFixed(1))} ${["MB","GB","TB"][t]}`},o=e=>e>=90?"bg-red-500":e>=70?"bg-yellow-500":"bg-green-500";return t&&!e?m.jsx("div",{className:"flex justify-center items-center py-8",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s?m.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:s}):e?(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center",children:[(0,m.jsxs)("div",{children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"M\xe9tricas del Sistema"}),m.jsx("p",{className:"text-sm text-gray-500",children:"Monitoreo en tiempo real del estado del sistema"})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[(0,m.jsxs)("div",{className:"flex items-center",children:[m.jsx("input",{id:"autoRefresh",type:"checkbox",checked:i,onChange:e=>l(e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),m.jsx("label",{htmlFor:"autoRefresh",className:"ml-2 block text-sm text-gray-900",children:"Auto-actualizar"})]}),m.jsx(n.z,{variant:"outline",onClick:r,disabled:t,children:t?"Actualizando...":"Actualizar"})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:[m.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,m.jsxs)("div",{className:"flex items-center",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:m.jsx("span",{className:"text-green-600",children:"⏱️"})})}),(0,m.jsxs)("div",{className:"ml-4",children:[m.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Tiempo Activo"}),m.jsx("div",{className:"text-2xl font-bold text-gray-900",children:(e=>{let t=Math.floor(e/86400),s=Math.floor(e%86400/3600),a=Math.floor(e%3600/60);return t>0?`${t}d ${s}h ${a}m`:s>0?`${s}h ${a}m`:`${a}m`})(e.uptime)})]})]})}),m.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,m.jsxs)("div",{className:"flex items-center",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:m.jsx("span",{className:"text-blue-600",children:"\uD83D\uDC65"})})}),(0,m.jsxs)("div",{className:"ml-4",children:[m.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Usuarios Activos"}),m.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.activeUsers})]})]})}),m.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,m.jsxs)("div",{className:"flex items-center",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:m.jsx("span",{className:"text-purple-600",children:"\uD83D\uDCC8"})})}),(0,m.jsxs)("div",{className:"ml-4",children:[m.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Req/min"}),m.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.requestsPerMinute})]})]})}),m.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,m.jsxs)("div",{className:"flex items-center",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:m.jsx("span",{className:"text-orange-600",children:"\uD83D\uDCCA"})})}),(0,m.jsxs)("div",{className:"ml-4",children:[m.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Total Registros"}),m.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.databaseStats.totalRecords.toLocaleString()})]})]})})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,m.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[m.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Uso de Memoria"}),(0,m.jsxs)("div",{className:"space-y-3",children:[(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,m.jsxs)("span",{children:["Usado: ",d(e.memoryUsage.used)]}),(0,m.jsxs)("span",{children:["Total: ",d(e.memoryUsage.total)]})]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:m.jsx("div",{className:`h-2 rounded-full ${o(e.memoryUsage.percentage)}`,style:{width:`${e.memoryUsage.percentage}%`}})}),(0,m.jsxs)("div",{className:"text-center text-sm text-gray-600",children:[e.memoryUsage.percentage,"% utilizado"]})]})]}),(0,m.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[m.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Uso de Disco"}),(0,m.jsxs)("div",{className:"space-y-3",children:[(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,m.jsxs)("span",{children:["Usado: ",d(e.diskUsage.used)]}),(0,m.jsxs)("span",{children:["Total: ",d(e.diskUsage.total)]})]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:m.jsx("div",{className:`h-2 rounded-full ${o(e.diskUsage.percentage)}`,style:{width:`${e.diskUsage.percentage}%`}})}),(0,m.jsxs)("div",{className:"text-center text-sm text-gray-600",children:[e.diskUsage.percentage,"% utilizado"]})]})]})]}),(0,m.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[m.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Estad\xedsticas de Base de Datos"}),(0,m.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[(0,m.jsxs)("div",{className:"text-center",children:[m.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.databaseStats.totalTables}),m.jsx("div",{className:"text-sm text-gray-500",children:"Tablas"})]}),(0,m.jsxs)("div",{className:"text-center",children:[m.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.databaseStats.totalRecords.toLocaleString()}),m.jsx("div",{className:"text-sm text-gray-500",children:"Registros"})]}),(0,m.jsxs)("div",{className:"text-center",children:[m.jsx("div",{className:"text-2xl font-bold text-purple-600",children:d(e.databaseStats.databaseSize)}),m.jsx("div",{className:"text-sm text-gray-500",children:"Tama\xf1o BD"})]})]})]}),(0,m.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[m.jsx("div",{className:"flex items-center justify-center",children:(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[m.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),m.jsx("span",{className:"text-lg font-medium text-gray-900",children:"Sistema Operativo"})]})}),(0,m.jsxs)("div",{className:"text-center text-sm text-gray-500 mt-2",children:["\xdaltima actualizaci\xf3n: ",new Date().toLocaleTimeString("es-ES")]})]})]}):m.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay m\xe9tricas disponibles"})}var v=s(41707);function y(){let{0:e,1:t}=(0,a.useState)("config"),{loading:s,error:n}=c();return s?m.jsx(r.Z,{title:"Configuraci\xf3n del Sistema",allowedRoles:[l.i4.ADMIN],children:m.jsx(v.g,{})}):m.jsx(r.Z,{title:"Configuraci\xf3n del Sistema",allowedRoles:[l.i4.ADMIN],children:(0,m.jsxs)("div",{className:"space-y-6",children:[m.jsx(i.Zb,{children:m.jsx(i.aY,{className:"p-0",children:m.jsx("div",{className:"border-b border-gray-200",children:m.jsx("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:[{id:"config",label:"Configuraci\xf3n General",icon:"⚙️"},{id:"backups",label:"Respaldos",icon:"\uD83D\uDCBE"},{id:"logs",label:"Logs del Sistema",icon:"\uD83D\uDCCB"},{id:"metrics",label:"M\xe9tricas",icon:"\uD83D\uDCCA"}].map(s=>(0,m.jsxs)("button",{onClick:()=>t(s.id),className:`${e===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2`,children:[m.jsx("span",{children:s.icon}),s.label]},s.id))})})})}),n&&m.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:n}),"config"===e&&(0,m.jsxs)(i.Zb,{children:[m.jsx(i.Ol,{children:m.jsx(i.ll,{children:"Configuraci\xf3n General del Sistema"})}),m.jsx(i.aY,{children:m.jsx(g,{})})]}),"backups"===e&&(0,m.jsxs)(i.Zb,{children:[m.jsx(i.Ol,{children:m.jsx(i.ll,{children:"Gesti\xf3n de Respaldos"})}),m.jsx(i.aY,{children:m.jsx(h,{})})]}),"logs"===e&&(0,m.jsxs)(i.Zb,{children:[m.jsx(i.Ol,{children:m.jsx(i.ll,{children:"Logs del Sistema"})}),m.jsx(i.aY,{children:m.jsx(j,{})})]}),"metrics"===e&&(0,m.jsxs)(i.Zb,{children:[m.jsx(i.Ol,{children:m.jsx(i.ll,{children:"M\xe9tricas del Sistema"})}),m.jsx(i.aY,{children:m.jsx(f,{})})]})]})})}},34567:(e,t,s)=>{"use strict";function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach(function(t){i(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function i(e,t,s){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,{hi:()=>d,x1:()=>n});class l{constructor(e="http://localhost:3001"){i(this,"baseURL",void 0),this.baseURL=e}async request(e,t={}){let s=`${this.baseURL}${e}`,a=r({headers:r({"Content-Type":"application/json"},t.headers)},t),i=localStorage.getItem("accessToken");i&&(a.headers=r(r({},a.headers),{},{Authorization:`Bearer ${i}`}));try{let e=await fetch(s,a),t=await e.json();if(!e.ok)throw Error(t.error?.message||"API request failed");return t}catch(e){throw console.error("API request error:",e),e}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}}let n=new l,d=n},52933:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(87866).createProxy)(String.raw`/Users/mauroociappina/Desktop/Dazlab/Proyecto 40/Repo/gravitad-040-2024-gravitad-generacio-actualizada-contenido-asist-de-escritura-plataforma/Req/frontend/src/app/admin/settings/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[588,361,909,805,715,741,630],()=>s(89026));module.exports=a})();